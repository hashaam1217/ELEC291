0000              1   ;--------------------------------------------------------
0000              2   ; File Created by C51
0000              3   ; Version 1.0.0 #1069 (Dec 11 2012) (MSVC)
0000              4   ; This file was generated Sun Jan 06 22:11:04 2013
0000              5   ;--------------------------------------------------------
                  5   $name hello
                  6   $optc51 --model-small
0000              8            R_DSEG    segment data
0000              9            R_CSEG    segment code
0000             10            R_BSEG    segment bit
0000             11            R_XSEG    segment xdata
0000             12            R_ISEG    segment idata
0000             13            R_OSEG    segment data overlay
0000             14            BIT_BANK  segment data overlay
0000             15            R_HOME    segment code
0000             16            R_GSINIT  segment code
0000             17            R_IXSEG   segment xdata
0000             18            R_CONST   segment code
0000             19            R_XINIT   segment code
0000             20            R_DINIT   segment code
0000             21   
0000             22   ;--------------------------------------------------------
0000             23   ; Public variables in this module
0000             24   ;--------------------------------------------------------
0000             25            public _main
0000             26            public _de2_8052_crt0
0000             27   ;--------------------------------------------------------
0000             28   ; Special Function Registers
0000             29   ;--------------------------------------------------------
0000             30   _P0             DATA 0x80
0000             31   _SP             DATA 0x81
0000             32   _DPL            DATA 0x82
0000             33   _DPH            DATA 0x83
0000             34   _PCON           DATA 0x87
0000             35   _TCON           DATA 0x88
0000             36   _TMOD           DATA 0x89
0000             37   _TL0            DATA 0x8a
0000             38   _TL1            DATA 0x8b
0000             39   _TH0            DATA 0x8c
0000             40   _TH1            DATA 0x8d
0000             41   _P1             DATA 0x90
0000             42   _SCON           DATA 0x98
0000             43   _SBUF           DATA 0x99
0000             44   _P2             DATA 0xa0
0000             45   _IE             DATA 0xa8
0000             46   _P3             DATA 0xb0
0000             47   _IP             DATA 0xb8
0000             48   _PSW            DATA 0xd0
0000             49   _ACC            DATA 0xe0
0000             50   _B              DATA 0xf0
0000             51   _T2CON          DATA 0xc8
0000             52   _RCAP2L         DATA 0xca
0000             53   _RCAP2H         DATA 0xcb
0000             54   _TL2            DATA 0xcc
0000             55   _TH2            DATA 0xcd
0000             56   _DPS            DATA 0x86
0000             57   _DPH1           DATA 0x85
0000             58   _DPL1           DATA 0x84
0000             59   _HEX0           DATA 0x91
0000             60   _HEX1           DATA 0x92
0000             61   _HEX2           DATA 0x93
0000             62   _HEX3           DATA 0x94
0000             63   _HEX4           DATA 0x8e
0000             64   _HEX5           DATA 0x8f
0000             65   _HEX6           DATA 0x96
0000             66   _HEX7           DATA 0x97
0000             67   _LEDRA          DATA 0xe8
0000             68   _LEDRB          DATA 0x95
0000             69   _LEDRC          DATA 0x9e
0000             70   _LEDG           DATA 0xf8
0000             71   _SWA            DATA 0xe8
0000             72   _SWB            DATA 0x95
0000             73   _SWC            DATA 0x9e
0000             74   _KEY            DATA 0xf8
0000             75   _P0MOD          DATA 0x9a
0000             76   _P1MOD          DATA 0x9b
0000             77   _P2MOD          DATA 0x9c
0000             78   _P3MOD          DATA 0x9d
0000             79   _LCD_CMD        DATA 0xd8
0000             80   _LCD_DATA       DATA 0xd9
0000             81   _LCD_MOD        DATA 0xda
0000             82   _JCMD           DATA 0xc0
0000             83   _JBUF           DATA 0xc1
0000             84   _JCNT           DATA 0xc2
0000             85   _REP_ADD_L      DATA 0xf1
0000             86   _REP_ADD_H      DATA 0xf2
0000             87   _REP_VALUE      DATA 0xf3
0000             88   _DEBUG_CALL_L   DATA 0xfa
0000             89   _DEBUG_CALL_H   DATA 0xfb
0000             90   _BPC            DATA 0xfc
0000             91   _BPS            DATA 0xfd
0000             92   _BPAL           DATA 0xfe
0000             93   _BPAH           DATA 0xff
0000             94   _LBPAL          DATA 0xfa
0000             95   _LBPAH          DATA 0xfb
0000             96   ;--------------------------------------------------------
0000             97   ; special function bits
0000             98   ;--------------------------------------------------------
0000             99   _P0_0           BIT 0x80
0000            100   _P0_1           BIT 0x81
0000            101   _P0_2           BIT 0x82
0000            102   _P0_3           BIT 0x83
0000            103   _P0_4           BIT 0x84
0000            104   _P0_5           BIT 0x85
0000            105   _P0_6           BIT 0x86
0000            106   _P0_7           BIT 0x87
0000            107   _IT0            BIT 0x88
0000            108   _IE0            BIT 0x89
0000            109   _IT1            BIT 0x8a
0000            110   _IE1            BIT 0x8b
0000            111   _TR0            BIT 0x8c
0000            112   _TF0            BIT 0x8d
0000            113   _TR1            BIT 0x8e
0000            114   _TF1            BIT 0x8f
0000            115   _P1_0           BIT 0x90
0000            116   _P1_1           BIT 0x91
0000            117   _P1_2           BIT 0x92
0000            118   _P1_3           BIT 0x93
0000            119   _P1_4           BIT 0x94
0000            120   _P1_5           BIT 0x95
0000            121   _P1_6           BIT 0x96
0000            122   _P1_7           BIT 0x97
0000            123   _RI             BIT 0x98
0000            124   _TI             BIT 0x99
0000            125   _RB8            BIT 0x9a
0000            126   _TB8            BIT 0x9b
0000            127   _REN            BIT 0x9c
0000            128   _SM2            BIT 0x9d
0000            129   _SM1            BIT 0x9e
0000            130   _SM0            BIT 0x9f
0000            131   _P2_0           BIT 0xa0
0000            132   _P2_1           BIT 0xa1
0000            133   _P2_2           BIT 0xa2
0000            134   _P2_3           BIT 0xa3
0000            135   _P2_4           BIT 0xa4
0000            136   _P2_5           BIT 0xa5
0000            137   _P2_6           BIT 0xa6
0000            138   _P2_7           BIT 0xa7
0000            139   _EX0            BIT 0xa8
0000            140   _ET0            BIT 0xa9
0000            141   _EX1            BIT 0xaa
0000            142   _ET1            BIT 0xab
0000            143   _ES             BIT 0xac
0000            144   _ET2            BIT 0xad
0000            145   _EA             BIT 0xaf
0000            146   _P3_0           BIT 0xb0
0000            147   _P3_1           BIT 0xb1
0000            148   _P3_2           BIT 0xb2
0000            149   _P3_3           BIT 0xb3
0000            150   _P3_4           BIT 0xb4
0000            151   _P3_5           BIT 0xb5
0000            152   _P3_6           BIT 0xb6
0000            153   _P3_7           BIT 0xb7
0000            154   _RXD            BIT 0xb0
0000            155   _TXD            BIT 0xb1
0000            156   _INT0           BIT 0xb2
0000            157   _INT1           BIT 0xb3
0000            158   _T0             BIT 0xb4
0000            159   _T1             BIT 0xb5
0000            160   _WR             BIT 0xb6
0000            161   _RD             BIT 0xb7
0000            162   _PX0            BIT 0xb8
0000            163   _PT0            BIT 0xb9
0000            164   _PX1            BIT 0xba
0000            165   _PT1            BIT 0xbb
0000            166   _PS             BIT 0xbc
0000            167   _PT2            BIT 0xbd
0000            168   _P              BIT 0xd0
0000            169   _F1             BIT 0xd1
0000            170   _OV             BIT 0xd2
0000            171   _RS0            BIT 0xd3
0000            172   _RS1            BIT 0xd4
0000            173   _F0             BIT 0xd5
0000            174   _AC             BIT 0xd6
0000            175   _CY             BIT 0xd7
0000            176   _T2CON_0        BIT 0xc8
0000            177   _T2CON_1        BIT 0xc9
0000            178   _T2CON_2        BIT 0xca
0000            179   _T2CON_3        BIT 0xcb
0000            180   _T2CON_4        BIT 0xcc
0000            181   _T2CON_5        BIT 0xcd
0000            182   _T2CON_6        BIT 0xce
0000            183   _T2CON_7        BIT 0xcf
0000            184   _CP_RL2         BIT 0xc8
0000            185   _C_T2           BIT 0xc9
0000            186   _TR2            BIT 0xca
0000            187   _EXEN2          BIT 0xcb
0000            188   _TCLK           BIT 0xcc
0000            189   _RCLK           BIT 0xcd
0000            190   _EXF2           BIT 0xce
0000            191   _TF2            BIT 0xcf
0000            192   _LEDRA_0        BIT 0xe8
0000            193   _LEDRA_1        BIT 0xe9
0000            194   _LEDRA_2        BIT 0xea
0000            195   _LEDRA_3        BIT 0xeb
0000            196   _LEDRA_4        BIT 0xec
0000            197   _LEDRA_5        BIT 0xed
0000            198   _LEDRA_6        BIT 0xee
0000            199   _LEDRA_7        BIT 0xef
0000            200   _SWA_0          BIT 0xe8
0000            201   _SWA_1          BIT 0xe9
0000            202   _SWA_2          BIT 0xea
0000            203   _SWA_3          BIT 0xeb
0000            204   _SWA_4          BIT 0xec
0000            205   _SWA_5          BIT 0xed
0000            206   _SWA_6          BIT 0xee
0000            207   _SWA_7          BIT 0xef
0000            208   _LEDG_0         BIT 0xf8
0000            209   _LEDG_1         BIT 0xf9
0000            210   _LEDG_2         BIT 0xfa
0000            211   _LEDG_3         BIT 0xfb
0000            212   _LEDG_4         BIT 0xfc
0000            213   _LEDG_5         BIT 0xfd
0000            214   _LEDG_6         BIT 0xfe
0000            215   _LEDG_7         BIT 0xff
0000            216   _KEY_1          BIT 0xf9
0000            217   _KEY_2          BIT 0xfa
0000            218   _KEY_3          BIT 0xfb
0000            219   _LCD_RW         BIT 0xd8
0000            220   _LCD_EN         BIT 0xd9
0000            221   _LCD_RS         BIT 0xda
0000            222   _LCD_ON         BIT 0xdb
0000            223   _LCD_BLON       BIT 0xdc
0000            224   _JRXRDY         BIT 0xc0
0000            225   _JTXRDY         BIT 0xc1
0000            226   _JRXEN          BIT 0xc2
0000            227   _JTXEN          BIT 0xc3
0000            228   _JTXFULL        BIT 0xc4
0000            229   _JRXFULL        BIT 0xc5
0000            230   _JTXEMPTY       BIT 0xc6
0000            231   _JTDI           BIT 0xc7
0000            232   ;--------------------------------------------------------
0000            233   ; overlayable register banks
0000            234   ;--------------------------------------------------------
0000            235            rbank0 segment data overlay
0000            236   ;--------------------------------------------------------
0000            237   ; internal ram data
0000            238   ;--------------------------------------------------------
0000            239            rseg R_DSEG
0000            240   ;--------------------------------------------------------
0000            241   ; overlayable items in internal ram 
0000            242   ;--------------------------------------------------------
0000            243            rseg R_OSEG
0000            244   ;--------------------------------------------------------
0000            245   ; indirectly addressable internal ram data
0000            246   ;--------------------------------------------------------
0000            247            rseg R_ISEG
0000            248   ;--------------------------------------------------------
0000            249   ; absolute internal ram data
0000            250   ;--------------------------------------------------------
0000            251            DSEG
0000            252   ;--------------------------------------------------------
0000            253   ; bit data
0000            254   ;--------------------------------------------------------
0000            255            rseg R_BSEG
0000            256   ;--------------------------------------------------------
0000            257   ; paged external ram data
0000            258   ;--------------------------------------------------------
0000            259            rseg R_XSEG
0000            260   ;--------------------------------------------------------
0000            261   ; external ram data
0000            262   ;--------------------------------------------------------
0000            263            rseg R_XSEG
0000            264   ;--------------------------------------------------------
0000            265   ; absolute external ram data
0000            266   ;--------------------------------------------------------
0000            267            XSEG
0000            268   ;--------------------------------------------------------
0000            269   ; external initialized ram data
0000            270   ;--------------------------------------------------------
0000            271            rseg R_IXSEG
0000            272            rseg R_HOME
0000            273            rseg R_GSINIT
0000            274            rseg R_CSEG
0000            275   ;--------------------------------------------------------
0000            276   ; Reset entry point and interrupt vectors
0000            277   ;--------------------------------------------------------
0000            278            CSEG at 0x0000
0000 020100     279            ljmp    _crt0
0003            280   ;--------------------------------------------------------
0003            281   ; global & static initialisations
0003            282   ;--------------------------------------------------------
0000            283            rseg R_HOME
0000            284            rseg R_GSINIT
0000            285            rseg R_GSINIT
0000            286   ;--------------------------------------------------------
0000            287   ; data variables initialization
0000            288   ;--------------------------------------------------------
0000            289            rseg R_DINIT
0000            290            ; The linker places a 'ret' at the end of segment R_DINIT.
0000            291   ;--------------------------------------------------------
0000            292   ; code
0000            293   ;--------------------------------------------------------
0000            294            rseg R_CSEG
0000            295   ;------------------------------------------------------------
0000            296   ;Allocation info for local variables in function 'de2_8052_crt0'
0000            297   ;------------------------------------------------------------
0000            298   ;------------------------------------------------------------
0000            299   ;        C:/Source/call51/bin/../include/mcs51/DE2_8052.h:304: void de2_8052_crt0 (void) _naked
0000            300   ;        -----------------------------------------
0000            301   ;         function de2_8052_crt0
0000            302   ;        -----------------------------------------
0000            303   _de2_8052_crt0:
0000            304   ;        naked function: no prologue.
0000            305   ;        C:/Source/call51/bin/../include/mcs51/DE2_8052.h:373: _endasm;
0000            306            
0000            307            
0000            308             rseg R_GSINIT
0000            309             public _crt0
0000            310            _crt0:
0000 7581FF     311             mov sp,#_stack_start-1
0003 120100     312             lcall __c51_external_startup
0006 E582       313             mov a,dpl
0008 6001       314             jz __c51_init_data
000A 020100     315             ljmp __c51_program_startup
000D            316            __c51_init_data:
000D            317            
000D            318   ; Initialize xdata variables
000D            319            
000D 758200     320             mov dpl, #_R_XINIT_start
0010 758300     321             mov dph, #(_R_XINIT_start>>8)
0013 758400     322             mov _DPL1, #_R_IXSEG_start
0016 758500     323             mov _DPH1, #(_R_IXSEG_start>>8)
0019 7800       324             mov r0, #_R_IXSEG_size
001B 7900       325             mov r1, #(_R_IXSEG_size>>8)
001D            326            
001D            327            XInitLoop?repeat?:
001D E8         328             mov a, r0
001E 49         329             orl a, r1
001F 6001       330             jz XInitLoop?done?
0021 E4         331             clr a
0022 758600     332             mov _DPS, #0 ; Using dpl, dph
0025 93         333             movc a,@a+dptr
0026 A3         334             inc dptr
0027 758601     335             mov _DPS, #1 ; Using DPL1, DPH1
002A F0         336             movx @dptr, a
002B A3         337             inc dptr
002C 18         338             dec r0
002D B8FF80     339             cjne r0, #0xff, XInitLoop?repeat?
0030 19         340             dec r1
0031 8001       341             sjmp XInitLoop?repeat?
0033            342            
0033            343            XInitLoop?done?:
0033            344            
0033            345   ; Clear xdata variables
0033 758600     346             mov _DPS, #0 ; Make sure we are using dpl, dph
0036 758200     347             mov dpl, #_R_XSEG_start
0039 758300     348             mov dph, #(_R_XSEG_start>>8)
003C 7C00       349             mov r4, #_R_XSEG_size
003E 7D00       350             mov r5, #(_R_XSEG_size>>8)
0040            351            
0040            352            XClearLoop?repeat?:
0040 EC         353             mov a, r4
0041 4D         354             orl a, r5
0042 6001       355             jz XClearLoop?done?
0044 E4         356             clr a
0045 F0         357             movx @dptr, a
0046 A3         358             inc dptr
0047 1C         359             dec r4
0048 BCFF90     360             cjne r4, #0xff, XClearLoop?repeat?
004B 1D         361             dec r5
004C 8001       362             sjmp XClearLoop?repeat?
004E            363            
004E            364            XClearLoop?done?:
004E 120100     365             lcall _R_DINIT_start ; Initialize data/idata variables
0051            366            
0051            367            __c51_program_startup:
0051 120100     368             lcall _main
0054            369            
0054            370            forever?home?:
0054 8001       371             sjmp forever?home?
0056            372            
0056            373             
0056            374   ;        naked function: no epilogue.
0056            375   ;------------------------------------------------------------
0056            376   ;Allocation info for local variables in function 'main'
0056            377   ;------------------------------------------------------------
0056            378   ;------------------------------------------------------------
0056            379   ;        C:\Source\call51\Examples\c\hello.c:12: void main (void)
0056            380   ;        -----------------------------------------
0056            381   ;         function main
0056            382   ;        -----------------------------------------
0056            383   _main:
0056            384            using   0
0056            385   ;        C:\Source\call51\Examples\c\hello.c:15: LEDRA=0;
0056 75E800     386            mov     _LEDRA,#0x00
0059            387   ;        C:\Source\call51\Examples\c\hello.c:16: LEDRB=0;
0059 759500     388            mov     _LEDRB,#0x00
005C            389   ;        C:\Source\call51\Examples\c\hello.c:17: LEDRC=0;
005C 759E00     390            mov     _LEDRC,#0x00
005F            391   ;        C:\Source\call51\Examples\c\hello.c:18: LEDG=0;
005F 75F800     392            mov     _LEDG,#0x00
0062            393   ;        C:\Source\call51\Examples\c\hello.c:19: setbaud_timer2(TIMER_2_RELOAD); // Initialize serial port using timer 2 
0062 90FFFD     394            mov     dptr,#0xFFFD
0065 120100     395            lcall   _setbaud_timer2
0068            396   ;        C:\Source\call51\Examples\c\hello.c:20: printf("Hello, world!\n");
0068 74E0       397            mov     a,#__str_0
006A C0E0       398            push    acc
006C 747B       399            mov     a,#(__str_0 >> 8)
006E C0E0       400            push    acc
0070 7480       401            mov     a,#0x80
0072 C0E0       402            push    acc
0074 120100     403            lcall   _printf
0077 1581       404            dec     sp
0079 1581       405            dec     sp
007B 1581       406            dec     sp
007D 22         407            ret
0000            408            rseg R_CSEG
0000            409   
0000            410            rseg R_CONST
0000            411   __str_0:
0000 48656C6C   412            db 'Hello, world!'
     6F2C2077
     6F726C64
     21
000D 0A         413            db 0x0A
000E 00         414            db 0x00
000F            415   
0000            416            rseg R_XINIT
0000            417   
0003            418            CSEG
0003            419   
0003            420   end
