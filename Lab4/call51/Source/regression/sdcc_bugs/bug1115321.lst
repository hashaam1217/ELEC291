0000              1   ;--------------------------------------------------------
0000              2   ; File Created by C51
0000              3   ; Version 1.0.0 #1069 (Nov 28 2012) (MSVC)
0000              4   ; This file was generated Sun Dec 09 00:50:40 2012
0000              5   ;--------------------------------------------------------
                  5   $name bug1115321
                  6   $optc51 --model-small
0000              8            R_DSEG    segment data
0000              9            R_CSEG    segment code
0000             10            R_BSEG    segment bit
0000             11            R_XSEG    segment xdata
0000             12            R_ISEG    segment idata
0000             13            R_OSEG    segment data overlay
0000             14            BIT_BANK  segment data overlay
0000             15            R_HOME    segment code
0000             16            R_GSINIT  segment code
0000             17            R_IXSEG   segment xdata
0000             18            R_CONST   segment code
0000             19            R_XINIT   segment code
0000             20            R_DINIT   segment code
0000             21   
0000             22   ;--------------------------------------------------------
0000             23   ; Public variables in this module
0000             24   ;--------------------------------------------------------
0000             25            public _test_s
0000             26            public _snprintf
0000             27            public _main
0000             28            public __c51_external_startup
0000             29            public ___fail_PARM_4
0000             30            public ___fail_PARM_3
0000             31            public ___fail_PARM_2
0000             32            public ___numFailures
0000             33            public ___numTests
0000             34            public ___prints
0000             35            public ___printn
0000             36            public ___printf
0000             37            public ___fail
0000             38            public _putchar
0000             39   ;--------------------------------------------------------
0000             40   ; Special Function Registers
0000             41   ;--------------------------------------------------------
0000             42   _ACC            DATA 0xe0
0000             43   _B              DATA 0xf0
0000             44   _DPH            DATA 0x83
0000             45   _DP0H           DATA 0x83
0000             46   _DPL            DATA 0x82
0000             47   _DP0L           DATA 0x82
0000             48   _IE             DATA 0xa8
0000             49   _IP             DATA 0xb8
0000             50   _P0             DATA 0x80
0000             51   _P1             DATA 0x90
0000             52   _P2             DATA 0xa0
0000             53   _P3             DATA 0xb0
0000             54   _PCON           DATA 0x87
0000             55   _PSW            DATA 0xd0
0000             56   _SBUF           DATA 0x99
0000             57   _SBUF0          DATA 0x99
0000             58   _SCON           DATA 0x98
0000             59   _SP             DATA 0x81
0000             60   _TCON           DATA 0x88
0000             61   _TH0            DATA 0x8c
0000             62   _TH1            DATA 0x8d
0000             63   _TL0            DATA 0x8a
0000             64   _TL1            DATA 0x8b
0000             65   _TMOD           DATA 0x89
0000             66   _PSBANK         DATA 0x90
0000             67   ;--------------------------------------------------------
0000             68   ; special function bits
0000             69   ;--------------------------------------------------------
0000             70   _BREG_F0        BIT 0xf0
0000             71   _BREG_F1        BIT 0xf1
0000             72   _BREG_F2        BIT 0xf2
0000             73   _BREG_F3        BIT 0xf3
0000             74   _BREG_F4        BIT 0xf4
0000             75   _BREG_F5        BIT 0xf5
0000             76   _BREG_F6        BIT 0xf6
0000             77   _BREG_F7        BIT 0xf7
0000             78   _EX0            BIT 0xa8
0000             79   _ET0            BIT 0xa9
0000             80   _EX1            BIT 0xaa
0000             81   _ET1            BIT 0xab
0000             82   _ES             BIT 0xac
0000             83   _EA             BIT 0xaf
0000             84   _PX0            BIT 0xb8
0000             85   _PT0            BIT 0xb9
0000             86   _PX1            BIT 0xba
0000             87   _PT1            BIT 0xbb
0000             88   _PS             BIT 0xbc
0000             89   _P0_0           BIT 0x80
0000             90   _P0_1           BIT 0x81
0000             91   _P0_2           BIT 0x82
0000             92   _P0_3           BIT 0x83
0000             93   _P0_4           BIT 0x84
0000             94   _P0_5           BIT 0x85
0000             95   _P0_6           BIT 0x86
0000             96   _P0_7           BIT 0x87
0000             97   _P1_0           BIT 0x90
0000             98   _P1_1           BIT 0x91
0000             99   _P1_2           BIT 0x92
0000            100   _P1_3           BIT 0x93
0000            101   _P1_4           BIT 0x94
0000            102   _P1_5           BIT 0x95
0000            103   _P1_6           BIT 0x96
0000            104   _P1_7           BIT 0x97
0000            105   _P2_0           BIT 0xa0
0000            106   _P2_1           BIT 0xa1
0000            107   _P2_2           BIT 0xa2
0000            108   _P2_3           BIT 0xa3
0000            109   _P2_4           BIT 0xa4
0000            110   _P2_5           BIT 0xa5
0000            111   _P2_6           BIT 0xa6
0000            112   _P2_7           BIT 0xa7
0000            113   _P3_0           BIT 0xb0
0000            114   _P3_1           BIT 0xb1
0000            115   _P3_2           BIT 0xb2
0000            116   _P3_3           BIT 0xb3
0000            117   _P3_4           BIT 0xb4
0000            118   _P3_5           BIT 0xb5
0000            119   _P3_6           BIT 0xb6
0000            120   _P3_7           BIT 0xb7
0000            121   _RXD            BIT 0xb0
0000            122   _RXD0           BIT 0xb0
0000            123   _TXD            BIT 0xb1
0000            124   _TXD0           BIT 0xb1
0000            125   _INT0           BIT 0xb2
0000            126   _INT1           BIT 0xb3
0000            127   _T0             BIT 0xb4
0000            128   _T1             BIT 0xb5
0000            129   _WR             BIT 0xb6
0000            130   _RD             BIT 0xb7
0000            131   _P              BIT 0xd0
0000            132   _F1             BIT 0xd1
0000            133   _OV             BIT 0xd2
0000            134   _RS0            BIT 0xd3
0000            135   _RS1            BIT 0xd4
0000            136   _F0             BIT 0xd5
0000            137   _AC             BIT 0xd6
0000            138   _CY             BIT 0xd7
0000            139   _RI             BIT 0x98
0000            140   _TI             BIT 0x99
0000            141   _RB8            BIT 0x9a
0000            142   _TB8            BIT 0x9b
0000            143   _REN            BIT 0x9c
0000            144   _SM2            BIT 0x9d
0000            145   _SM1            BIT 0x9e
0000            146   _SM0            BIT 0x9f
0000            147   _IT0            BIT 0x88
0000            148   _IE0            BIT 0x89
0000            149   _IT1            BIT 0x8a
0000            150   _IE1            BIT 0x8b
0000            151   _TR0            BIT 0x8c
0000            152   _TF0            BIT 0x8d
0000            153   _TR1            BIT 0x8e
0000            154   _TF1            BIT 0x8f
0000            155   ;--------------------------------------------------------
0000            156   ; overlayable register banks
0000            157   ;--------------------------------------------------------
0000            158            rbank0 segment data overlay
0000            159   ;--------------------------------------------------------
0000            160   ; internal ram data
0000            161   ;--------------------------------------------------------
0000            162            rseg R_DSEG
0000            163   ___numTests:
0000            164            ds 2
0002            165   ___numFailures:
0002            166            ds 2
0004            167   ___fail_PARM_2:
0004            168            ds 2
0006            169   ___fail_PARM_3:
0006            170            ds 2
0008            171   ___fail_PARM_4:
0008            172            ds 2
000A            173   ___fail_sloc0_1_0:
000A            174            ds 3
000D            175   _test_s_buffer_1_1:
000D            176            ds 32
002D            177   ;--------------------------------------------------------
002D            178   ; overlayable items in internal ram 
002D            179   ;--------------------------------------------------------
0000            180            rseg R_OSEG
0000            181   ;--------------------------------------------------------
0000            182   ; indirectly addressable internal ram data
0000            183   ;--------------------------------------------------------
0000            184            rseg R_ISEG
0000            185   ___printn_buf_2_3:
0000            186            ds 6
0006            187   ;--------------------------------------------------------
0006            188   ; absolute internal ram data
0006            189   ;--------------------------------------------------------
0000            190            DSEG
0000            191   ;--------------------------------------------------------
0000            192   ; bit data
0000            193   ;--------------------------------------------------------
0000            194            rseg R_BSEG
0000            195   ;--------------------------------------------------------
0000            196   ; paged external ram data
0000            197   ;--------------------------------------------------------
0000            198            rseg R_XSEG
0000            199   ;--------------------------------------------------------
0000            200   ; external ram data
0000            201   ;--------------------------------------------------------
0000            202            rseg R_XSEG
0000            203   ;--------------------------------------------------------
0000            204   ; absolute external ram data
0000            205   ;--------------------------------------------------------
0000            206            XSEG
0000            207   ;--------------------------------------------------------
0000            208   ; external initialized ram data
0000            209   ;--------------------------------------------------------
0000            210            rseg R_IXSEG
0000            211            rseg R_HOME
0000            212            rseg R_GSINIT
0000            213            rseg R_CSEG
0000            214   ;--------------------------------------------------------
0000            215   ; Reset entry point and interrupt vectors
0000            216   ;--------------------------------------------------------
0000            217            CSEG at 0x0000
0000 020100     218            ljmp    _crt0
0003            219   ;--------------------------------------------------------
0003            220   ; global & static initialisations
0003            221   ;--------------------------------------------------------
0000            222            rseg R_HOME
0000            223            rseg R_GSINIT
0000            224            rseg R_GSINIT
0000            225   ;--------------------------------------------------------
0000            226   ; data variables initialization
0000            227   ;--------------------------------------------------------
0000            228            rseg R_DINIT
0000            229   ;        C:\Source\call51\Source\regression\sdcc_bugs\/../fwk/include/testfwk.h:16: int __numTests = 0;
0000 E4         230            clr     a
0001 F500       231            mov     ___numTests,a
0003 F501       232            mov     (___numTests + 1),a
0005            233   ;        C:\Source\call51\Source\regression\sdcc_bugs\/../fwk/include/testfwk.h:18: int __numFailures = 0;
0005 E4         234            clr     a
0006 F5C0       235            mov     ___numFailures,a
0008 F5C1       236            mov     (___numFailures + 1),a
000A            237            ; The linker places a 'ret' at the end of segment R_DINIT.
000A            238   ;--------------------------------------------------------
000A            239   ; code
000A            240   ;--------------------------------------------------------
0000            241            rseg R_CSEG
0000            242   ;------------------------------------------------------------
0000            243   ;Allocation info for local variables in function '__prints'
0000            244   ;------------------------------------------------------------
0000            245   ;s                         Allocated to registers r2 r3 r4 
0000            246   ;c                         Allocated to registers r6 
0000            247   ;------------------------------------------------------------
0000            248   ;        C:\Source\call51\Source\regression\sdcc_bugs\/../fwk/include/testfwk.h:106: __prints (const char *s)
0000            249   ;        -----------------------------------------
0000            250   ;         function __prints
0000            251   ;        -----------------------------------------
0000            252   ___prints:
0000            253            using   0
0000 AA82       254            mov     r2,dpl
0002 AB83       255            mov     r3,dph
0004 ACF0       256            mov     r4,b
0006            257   ;        C:\Source\call51\Source\regression\sdcc_bugs\/../fwk/include/testfwk.h:110: while ('\0' != (c = *s))
0006            258   L002001?:
0006 8A82       259            mov     dpl,r2
0008 8B83       260            mov     dph,r3
000A 8CF0       261            mov     b,r4
000C 120100     262            lcall   __gptrget
000F FD         263            mov     r5,a
0010 FE         264            mov     r6,a
0011 BD00D8     265            cjne    r5,#0x00,L002009?
0014 22         266            ret
0015            267   L002009?:
0015            268   ;        C:\Source\call51\Source\regression\sdcc_bugs\/../fwk/include/testfwk.h:112: putchar(c);
0015 8E82       269            mov     dpl,r6
0017 C002       270            push    ar2
0019 C003       271            push    ar3
001B C004       272            push    ar4
001D 120100     273            lcall   _putchar
0020 D004       274            pop     ar4
0022 D003       275            pop     ar3
0024 D002       276            pop     ar2
0026            277   ;        C:\Source\call51\Source\regression\sdcc_bugs\/../fwk/include/testfwk.h:113: ++s;
0026 0A         278            inc     r2
0027 BA0058     279            cjne    r2,#0x00,L002001?
002A 0B         280            inc     r3
002B 8001       281            sjmp    L002001?
002D            282   ;------------------------------------------------------------
002D            283   ;Allocation info for local variables in function '__printn'
002D            284   ;------------------------------------------------------------
002D            285   ;n                         Allocated to registers r2 r3 
002D            286   ;p                         Allocated to registers r4 
002D            287   ;neg                       Allocated to registers r5 
002D            288   ;buf                       Allocated with name '___printn_buf_2_3'
002D            289   ;------------------------------------------------------------
002D            290   ;        C:\Source\call51\Source\regression\sdcc_bugs\/../fwk/include/testfwk.h:118: __printn (int n)
002D            291   ;        -----------------------------------------
002D            292   ;         function __printn
002D            293   ;        -----------------------------------------
002D            294   ___printn:
002D AA82       295            mov     r2,dpl
002F AB83       296            mov     r3,dph
0031            297   ;        C:\Source\call51\Source\regression\sdcc_bugs\/../fwk/include/testfwk.h:120: if (0 == n)
0031 BA0018     298            cjne    r2,#0x00,L003009?
0034 BB0018     299            cjne    r3,#0x00,L003009?
0037            300   ;        C:\Source\call51\Source\regression\sdcc_bugs\/../fwk/include/testfwk.h:122: putchar('0');
0037 758230     301            mov     dpl,#0x30
003A 020100     302            ljmp    _putchar
003D            303   L003009?:
003D            304   ;        C:\Source\call51\Source\regression\sdcc_bugs\/../fwk/include/testfwk.h:127: char MEMSPACE_BUF *p = &buf[sizeof (buf) - 1];
003D 7C1D       305            mov     r4,#(___printn_buf_2_3 + 0x0005)
003F            306   ;        C:\Source\call51\Source\regression\sdcc_bugs\/../fwk/include/testfwk.h:128: char neg = 0;
003F 7D00       307            mov     r5,#0x00
0041            308   ;        C:\Source\call51\Source\regression\sdcc_bugs\/../fwk/include/testfwk.h:130: buf[sizeof(buf) - 1] = '\0';
0041 781D       309            mov     r0,#(___printn_buf_2_3 + 0x0005)
0043 7600       310            mov     @r0,#0x00
0045            311   ;        C:\Source\call51\Source\regression\sdcc_bugs\/../fwk/include/testfwk.h:132: if (0 > n)
0045 EB         312            mov     a,r3
0046 30E798     313            jnb     acc.7,L003016?
0049            314   ;        C:\Source\call51\Source\regression\sdcc_bugs\/../fwk/include/testfwk.h:134: n = -n;
0049 C3         315            clr     c
004A E4         316            clr     a
004B 9A         317            subb    a,r2
004C FA         318            mov     r2,a
004D E4         319            clr     a
004E 9B         320            subb    a,r3
004F FB         321            mov     r3,a
0050            322   ;        C:\Source\call51\Source\regression\sdcc_bugs\/../fwk/include/testfwk.h:135: neg = 1;
0050 7D01       323            mov     r5,#0x01
0052            324   ;        C:\Source\call51\Source\regression\sdcc_bugs\/../fwk/include/testfwk.h:138: while (0 != n)
0052            325   L003016?:
0052 8C00       326            mov     ar0,r4
0054            327   L003003?:
0054 BA0018     328            cjne    r2,#0x00,L003022?
0057 BB0018     329            cjne    r3,#0x00,L003022?
005A 8001       330            sjmp    L003018?
005C            331   L003022?:
005C            332   ;        C:\Source\call51\Source\regression\sdcc_bugs\/../fwk/include/testfwk.h:140: *--p = '0' + __mod (n, 10);
005C 18         333            dec     r0
005D 75000A     334            mov     __modsint_PARM_2,#0x0A
0060 E4         335            clr     a
0061 F501       336            mov     (__modsint_PARM_2 + 1),a
0063 8A82       337            mov     dpl,r2
0065 8B83       338            mov     dph,r3
0067 C002       339            push    ar2
0069 C003       340            push    ar3
006B C005       341            push    ar5
006D C000       342            push    ar0
006F 120100     343            lcall   __modsint
0072 AE82       344            mov     r6,dpl
0074 D000       345            pop     ar0
0076 D005       346            pop     ar5
0078 D003       347            pop     ar3
007A D002       348            pop     ar2
007C 7430       349            mov     a,#0x30
007E 2E         350            add     a,r6
007F F6         351            mov     @r0,a
0080            352   ;        C:\Source\call51\Source\regression\sdcc_bugs\/../fwk/include/testfwk.h:141: n = __div (n, 10);
0080 75000A     353            mov     __divsint_PARM_2,#0x0A
0083 E4         354            clr     a
0084 F501       355            mov     (__divsint_PARM_2 + 1),a
0086 8A82       356            mov     dpl,r2
0088 8B83       357            mov     dph,r3
008A C005       358            push    ar5
008C C000       359            push    ar0
008E 120100     360            lcall   __divsint
0091 AA82       361            mov     r2,dpl
0093 AB83       362            mov     r3,dph
0095 D000       363            pop     ar0
0097 D005       364            pop     ar5
0099 8001       365            sjmp    L003003?
009B            366   L003018?:
009B 8804       367            mov     ar4,r0
009D            368   ;        C:\Source\call51\Source\regression\sdcc_bugs\/../fwk/include/testfwk.h:144: if (neg)
009D ED         369            mov     a,r5
009E 6001       370            jz      L003007?
00A0            371   ;        C:\Source\call51\Source\regression\sdcc_bugs\/../fwk/include/testfwk.h:145: putchar('-');
00A0 75822D     372            mov     dpl,#0x2D
00A3 C004       373            push    ar4
00A5 120100     374            lcall   _putchar
00A8 D004       375            pop     ar4
00AA            376   L003007?:
00AA            377   ;        C:\Source\call51\Source\regression\sdcc_bugs\/../fwk/include/testfwk.h:147: __prints(p);
00AA 7A00       378            mov     r2,#0x00
00AC 7B40       379            mov     r3,#0x40
00AE 8C82       380            mov     dpl,r4
00B0 8A83       381            mov     dph,r2
00B2 8BF0       382            mov     b,r3
00B4 020100     383            ljmp    ___prints
00B7            384   ;------------------------------------------------------------
00B7            385   ;Allocation info for local variables in function '_c51_external_startup'
00B7            386   ;------------------------------------------------------------
00B7            387   ;------------------------------------------------------------
00B7            388   ;        C:\Source\call51\Source\regression\sdcc_bugs\/../fwk/include/testfwk.h:155: _c51_external_startup (void)
00B7            389   ;        -----------------------------------------
00B7            390   ;         function _c51_external_startup
00B7            391   ;        -----------------------------------------
00B7            392   __c51_external_startup:
00B7            393   ;        C:\Source\call51\Source\regression\sdcc_bugs\/../fwk/include/testfwk.h:159: TI = 1;
00B7 D299       394            setb    _TI
00B9            395   ;        C:\Source\call51\Source\regression\sdcc_bugs\/../fwk/include/testfwk.h:160: return 0;
00B9 758200     396            mov     dpl,#0x00
00BC 22         397            ret
00BD            398   ;------------------------------------------------------------
00BD            399   ;Allocation info for local variables in function '__printf'
00BD            400   ;------------------------------------------------------------
00BD            401   ;szFormat                  Allocated to stack - offset -5
00BD            402   ;ap                        Allocated to registers r2 
00BD            403   ;sz                        Allocated to registers r3 r4 r5 
00BD            404   ;i                         Allocated to registers 
00BD            405   ;------------------------------------------------------------
00BD            406   ;        C:\Source\call51\Source\regression\sdcc_bugs\/../fwk/include/testfwk.h:166: __printf (const char *szFormat, ...)
00BD            407   ;        -----------------------------------------
00BD            408   ;         function __printf
00BD            409   ;        -----------------------------------------
00BD            410   ___printf:
00BD C000       411            push    _bp
00BF 858100     412            mov     _bp,sp
00C2            413   ;        C:\Source\call51\Source\regression\sdcc_bugs\/../fwk/include/testfwk.h:169: va_start (ap, szFormat);
00C2 E500       414            mov     a,_bp
00C4 24FB       415            add     a,#0xfb
00C6 FA         416            mov     r2,a
00C7            417   ;        C:\Source\call51\Source\regression\sdcc_bugs\/../fwk/include/testfwk.h:171: while (*szFormat)
00C7            418   L005009?:
00C7 E500       419            mov     a,_bp
00C9 24FB       420            add     a,#0xfb
00CB F8         421            mov     r0,a
00CC 8603       422            mov     ar3,@r0
00CE 08         423            inc     r0
00CF 8604       424            mov     ar4,@r0
00D1 08         425            inc     r0
00D2 8605       426            mov     ar5,@r0
00D4 8B82       427            mov     dpl,r3
00D6 8C83       428            mov     dph,r4
00D8 8DF0       429            mov     b,r5
00DA 120100     430            lcall   __gptrget
00DD FE         431            mov     r6,a
00DE 7001       432            jnz     L005020?
00E0 020100     433            ljmp    L005012?
00E3            434   L005020?:
00E3            435   ;        C:\Source\call51\Source\regression\sdcc_bugs\/../fwk/include/testfwk.h:173: if (*szFormat == '%')
00E3 BE2538     436            cjne    r6,#0x25,L005021?
00E6 8001       437            sjmp    L005022?
00E8            438   L005021?:
00E8 020100     439            ljmp    L005007?
00EB            440   L005022?:
00EB            441   ;        C:\Source\call51\Source\regression\sdcc_bugs\/../fwk/include/testfwk.h:175: switch (*++szFormat)
00EB E500       442            mov     a,_bp
00ED 24FB       443            add     a,#0xfb
00EF F8         444            mov     r0,a
00F0 7401       445            mov     a,#0x01
00F2 2B         446            add     a,r3
00F3 F6         447            mov     @r0,a
00F4 E4         448            clr     a
00F5 3C         449            addc    a,r4
00F6 08         450            inc     r0
00F7 F6         451            mov     @r0,a
00F8 08         452            inc     r0
00F9 A605       453            mov     @r0,ar5
00FB E500       454            mov     a,_bp
00FD 24FB       455            add     a,#0xfb
00FF F8         456            mov     r0,a
0100 8603       457            mov     ar3,@r0
0102 08         458            inc     r0
0103 8604       459            mov     ar4,@r0
0105 08         460            inc     r0
0106 8605       461            mov     ar5,@r0
0108 8B82       462            mov     dpl,r3
010A 8C83       463            mov     dph,r4
010C 8DF0       464            mov     b,r5
010E 120100     465            lcall   __gptrget
0111 FB         466            mov     r3,a
0112 BB25F8     467            cjne    r3,#0x25,L005023?
0115 8001       468            sjmp    L005003?
0117            469   L005023?:
0117 BB7378     470            cjne    r3,#0x73,L005024?
011A 8001       471            sjmp    L005001?
011C            472   L005024?:
011C            473   ;        C:\Source\call51\Source\regression\sdcc_bugs\/../fwk/include/testfwk.h:177: case 's':
011C BB75F8     474            cjne    r3,#0x75,L005008?
011F 8001       475            sjmp    L005002?
0121            476   L005001?:
0121            477   ;        C:\Source\call51\Source\regression\sdcc_bugs\/../fwk/include/testfwk.h:179: char *sz = va_arg (ap, char *);
0121 EA         478            mov     a,r2
0122 24FD       479            add     a,#0xfd
0124 F8         480            mov     r0,a
0125 FA         481            mov     r2,a
0126 8603       482            mov     ar3,@r0
0128 08         483            inc     r0
0129 8604       484            mov     ar4,@r0
012B 08         485            inc     r0
012C 8605       486            mov     ar5,@r0
012E 18         487            dec     r0
012F 18         488            dec     r0
0130            489   ;        C:\Source\call51\Source\regression\sdcc_bugs\/../fwk/include/testfwk.h:180: __prints(sz);
0130 8B82       490            mov     dpl,r3
0132 8C83       491            mov     dph,r4
0134 8DF0       492            mov     b,r5
0136 C002       493            push    ar2
0138 120100     494            lcall   ___prints
013B D002       495            pop     ar2
013D            496   ;        C:\Source\call51\Source\regression\sdcc_bugs\/../fwk/include/testfwk.h:181: break;
013D            497   ;        C:\Source\call51\Source\regression\sdcc_bugs\/../fwk/include/testfwk.h:184: case 'u':
013D 8001       498            sjmp    L005008?
013F            499   L005002?:
013F            500   ;        C:\Source\call51\Source\regression\sdcc_bugs\/../fwk/include/testfwk.h:186: int i = va_arg (ap, int);
013F EA         501            mov     a,r2
0140 24FE       502            add     a,#0xfe
0142 F8         503            mov     r0,a
0143 FA         504            mov     r2,a
0144 8603       505            mov     ar3,@r0
0146 08         506            inc     r0
0147 8604       507            mov     ar4,@r0
0149 18         508            dec     r0
014A 8B82       509            mov     dpl,r3
014C 8C83       510            mov     dph,r4
014E            511   ;        C:\Source\call51\Source\regression\sdcc_bugs\/../fwk/include/testfwk.h:187: __printn (i);
014E C002       512            push    ar2
0150 120100     513            lcall   ___printn
0153 D002       514            pop     ar2
0155            515   ;        C:\Source\call51\Source\regression\sdcc_bugs\/../fwk/include/testfwk.h:188: break;
0155            516   ;        C:\Source\call51\Source\regression\sdcc_bugs\/../fwk/include/testfwk.h:191: case '%':
0155 8001       517            sjmp    L005008?
0157            518   L005003?:
0157            519   ;        C:\Source\call51\Source\regression\sdcc_bugs\/../fwk/include/testfwk.h:192: putchar ('%');
0157 758225     520            mov     dpl,#0x25
015A C002       521            push    ar2
015C 120100     522            lcall   _putchar
015F D002       523            pop     ar2
0161            524   ;        C:\Source\call51\Source\regression\sdcc_bugs\/../fwk/include/testfwk.h:193: break;
0161            525   ;        C:\Source\call51\Source\regression\sdcc_bugs\/../fwk/include/testfwk.h:197: }
0161 8001       526            sjmp    L005008?
0163            527   L005007?:
0163            528   ;        C:\Source\call51\Source\regression\sdcc_bugs\/../fwk/include/testfwk.h:201: putchar (*szFormat);
0163 8E82       529            mov     dpl,r6
0165 C002       530            push    ar2
0167 120100     531            lcall   _putchar
016A D002       532            pop     ar2
016C            533   L005008?:
016C            534   ;        C:\Source\call51\Source\regression\sdcc_bugs\/../fwk/include/testfwk.h:203: szFormat++;
016C E500       535            mov     a,_bp
016E 24FB       536            add     a,#0xfb
0170 F8         537            mov     r0,a
0171 06         538            inc     @r0
0172 B60078     539            cjne    @r0,#0x00,L005026?
0175 08         540            inc     r0
0176 06         541            inc     @r0
0177            542   L005026?:
0177 020100     543            ljmp    L005009?
017A            544   ;        C:\Source\call51\Source\regression\sdcc_bugs\/../fwk/include/testfwk.h:205: va_end (ap);
017A            545   L005012?:
017A D000       546            pop     _bp
017C 22         547            ret
017D            548   ;------------------------------------------------------------
017D            549   ;Allocation info for local variables in function '__fail'
017D            550   ;------------------------------------------------------------
017D            551   ;szCond                    Allocated with name '___fail_PARM_2'
017D            552   ;szFile                    Allocated with name '___fail_PARM_3'
017D            553   ;line                      Allocated with name '___fail_PARM_4'
017D            554   ;szMsg                     Allocated to registers r2 r3 
017D            555   ;sloc0                     Allocated with name '___fail_sloc0_1_0'
017D            556   ;------------------------------------------------------------
017D            557   ;        C:\Source\call51\Source\regression\sdcc_bugs\/../fwk/include/testfwk.h:209: __fail (code const char *szMsg, code const char *szCond, code const char *szFile, int line)
017D            558   ;        -----------------------------------------
017D            559   ;         function __fail
017D            560   ;        -----------------------------------------
017D            561   ___fail:
017D AA82       562            mov     r2,dpl
017F AB83       563            mov     r3,dph
0181            564   ;        C:\Source\call51\Source\regression\sdcc_bugs\/../fwk/include/testfwk.h:211: __printf("--- FAIL: \"%s\" on %s at %s:%u\n", szMsg, szCond, szFile, line);
0181 AC40       565            mov     r4,___fail_PARM_3
0183 AD41       566            mov     r5,(___fail_PARM_3 + 1)
0185 7E80       567            mov     r6,#0x80
0187 858078     568            mov     ___fail_sloc0_1_0,___fail_PARM_2
018A 858179     569            mov     (___fail_sloc0_1_0 + 1),(___fail_PARM_2 + 1)
018D 757A80     570            mov     (___fail_sloc0_1_0 + 2),#0x80
0190 7F80       571            mov     r7,#0x80
0192 C000       572            push    ___fail_PARM_4
0194 C001       573            push    (___fail_PARM_4 + 1)
0196 C004       574            push    ar4
0198 C005       575            push    ar5
019A C006       576            push    ar6
019C C078       577            push    ___fail_sloc0_1_0
019E C079       578            push    (___fail_sloc0_1_0 + 1)
01A0 C07A       579            push    (___fail_sloc0_1_0 + 2)
01A2 C002       580            push    ar2
01A4 C003       581            push    ar3
01A6 C007       582            push    ar7
01A8 74B8       583            mov     a,#__str_0
01AA C0E0       584            push    acc
01AC 746C       585            mov     a,#(__str_0 >> 8)
01AE C0E0       586            push    acc
01B0 7480       587            mov     a,#0x80
01B2 C0E0       588            push    acc
01B4 120100     589            lcall   ___printf
01B7 E581       590            mov     a,sp
01B9 24F2       591            add     a,#0xf2
01BB F581       592            mov     sp,a
01BD            593   ;        C:\Source\call51\Source\regression\sdcc_bugs\/../fwk/include/testfwk.h:212: __numFailures++;
01BD 05C0       594            inc     ___numFailures
01BF E4         595            clr     a
01C0 B5C0F8     596            cjne    a,___numFailures,L006003?
01C3 05C1       597            inc     (___numFailures + 1)
01C5            598   L006003?:
01C5 22         599            ret
01C6            600   ;------------------------------------------------------------
01C6            601   ;Allocation info for local variables in function 'main'
01C6            602   ;------------------------------------------------------------
01C6            603   ;------------------------------------------------------------
01C6            604   ;        C:\Source\call51\Source\regression\sdcc_bugs\/../fwk/include/testfwk.h:216: main (void)
01C6            605   ;        -----------------------------------------
01C6            606   ;         function main
01C6            607   ;        -----------------------------------------
01C6            608   _main:
01C6            609   ;        C:\Source\call51\Source\regression\sdcc_bugs\/../fwk/include/testfwk.h:218: __printf("--- Running: %s\n", __getSuiteName());
01C6 120100     610            lcall   ___getSuiteName
01C9 AA82       611            mov     r2,dpl
01CB AB83       612            mov     r3,dph
01CD 7C80       613            mov     r4,#0x80
01CF C002       614            push    ar2
01D1 C003       615            push    ar3
01D3 C004       616            push    ar4
01D5 7478       617            mov     a,#__str_1
01D7 C0E0       618            push    acc
01D9 746D       619            mov     a,#(__str_1 >> 8)
01DB C0E0       620            push    acc
01DD 7480       621            mov     a,#0x80
01DF C0E0       622            push    acc
01E1 120100     623            lcall   ___printf
01E4 E581       624            mov     a,sp
01E6 24FA       625            add     a,#0xfa
01E8 F581       626            mov     sp,a
01EA            627   ;        C:\Source\call51\Source\regression\sdcc_bugs\/../fwk/include/testfwk.h:220: __runSuite();
01EA 120100     628            lcall   ___runSuite
01ED            629   ;        C:\Source\call51\Source\regression\sdcc_bugs\/../fwk/include/testfwk.h:224: __numFailures, __numTests, __numCases
01ED 900000     630            mov     dptr,#___numCases
01F0 E4         631            clr     a
01F1 93         632            movc    a,@a+dptr
01F2 FA         633            mov     r2,a
01F3 7401       634            mov     a,#0x01
01F5 93         635            movc    a,@a+dptr
01F6 FB         636            mov     r3,a
01F7            637   ;        C:\Source\call51\Source\regression\sdcc_bugs\/../fwk/include/testfwk.h:222: __printf("--- Summary: %u/%u/%u: %u failed of %u tests in %u cases.\n",
01F7 C002       638            push    ar2
01F9 C003       639            push    ar3
01FB C000       640            push    ___numTests
01FD C001       641            push    (___numTests + 1)
01FF C0C0       642            push    ___numFailures
0201 C0C1       643            push    (___numFailures + 1)
0203 C002       644            push    ar2
0205 C003       645            push    ar3
0207 C000       646            push    ___numTests
0209 C001       647            push    (___numTests + 1)
020B C0C0       648            push    ___numFailures
020D C0C1       649            push    (___numFailures + 1)
020F 7438       650            mov     a,#__str_2
0211 C0E0       651            push    acc
0213 746E       652            mov     a,#(__str_2 >> 8)
0215 C0E0       653            push    acc
0217 7480       654            mov     a,#0x80
0219 C0E0       655            push    acc
021B 120100     656            lcall   ___printf
021E E581       657            mov     a,sp
0220 24F1       658            add     a,#0xf1
0222 F581       659            mov     sp,a
0224            660   ;        C:\Source\call51\Source\regression\sdcc_bugs\/../fwk/include/testfwk.h:227: IE=0;
0224 75A800     661            mov     _IE,#0x00
0227            662   ;        C:\Source\call51\Source\regression\sdcc_bugs\/../fwk/include/testfwk.h:228: return 0;
0227 900000     663            mov     dptr,#0x0000
022A 22         664            ret
022B            665   ;------------------------------------------------------------
022B            666   ;Allocation info for local variables in function 'snprintf'
022B            667   ;------------------------------------------------------------
022B            668   ;buffer                    Allocated to stack - offset -5
022B            669   ;size                      Allocated to stack - offset -6
022B            670   ;format                    Allocated to stack - offset -9
022B            671   ;args                      Allocated to stack - offset 1
022B            672   ;start                     Allocated to stack - offset 2
022B            673   ;end                       Allocated to registers r5 r6 r7 
022B            674   ;padding                   Allocated to stack - offset 5
022B            675   ;digits                    Allocated to stack - offset 6
022B            676   ;val                       Allocated to stack - offset 8
022B            677   ;val_end                   Allocated to registers r2 r3 r4 
022B            678   ;length                    Allocated to stack - offset 11
022B            679   ;sloc0                     Allocated to stack - offset 13
022B            680   ;sloc1                     Allocated to stack - offset 14
022B            681   ;sloc2                     Allocated to stack - offset 15
022B            682   ;sloc3                     Allocated to stack - offset 17
022B            683   ;------------------------------------------------------------
022B            684   ;        C:\Source\call51\Source\regression\sdcc_bugs\bug1115321.c:105: unsigned char C51_SNPRINTF( char *buffer, const unsigned char size,
022B            685   ;        -----------------------------------------
022B            686   ;         function snprintf
022B            687   ;        -----------------------------------------
022B            688   _snprintf:
022B C000       689            push    _bp
022D E581       690            mov     a,sp
022F F500       691            mov     _bp,a
0231 2413       692            add     a,#0x13
0233 F581       693            mov     sp,a
0235            694   ;        C:\Source\call51\Source\regression\sdcc_bugs\bug1115321.c:109: char *start = buffer;
0235 E500       695            mov     a,_bp
0237 24FB       696            add     a,#0xfb
0239 F8         697            mov     r0,a
023A A900       698            mov     r1,_bp
023C 09         699            inc     r1
023D 09         700            inc     r1
023E E6         701            mov     a,@r0
023F F7         702            mov     @r1,a
0240 08         703            inc     r0
0241 09         704            inc     r1
0242 E6         705            mov     a,@r0
0243 F7         706            mov     @r1,a
0244 08         707            inc     r0
0245 09         708            inc     r1
0246 E6         709            mov     a,@r0
0247 F7         710            mov     @r1,a
0248            711   ;        C:\Source\call51\Source\regression\sdcc_bugs\bug1115321.c:110: char *end   = &buffer[size];
0248 A800       712            mov     r0,_bp
024A 08         713            inc     r0
024B 08         714            inc     r0
024C E500       715            mov     a,_bp
024E 24FA       716            add     a,#0xfa
0250 F9         717            mov     r1,a
0251 E7         718            mov     a,@r1
0252 26         719            add     a,@r0
0253 FD         720            mov     r5,a
0254 E4         721            clr     a
0255 08         722            inc     r0
0256 36         723            addc    a,@r0
0257 FE         724            mov     r6,a
0258 08         725            inc     r0
0259 8607       726            mov     ar7,@r0
025B            727   ;        C:\Source\call51\Source\regression\sdcc_bugs\bug1115321.c:112: va_start( args, format );
025B E500       728            mov     a,_bp
025D 24F7       729            add     a,#0xf7
025F FA         730            mov     r2,a
0260 A800       731            mov     r0,_bp
0262 08         732            inc     r0
0263 A602       733            mov     @r0,ar2
0265            734   ;        C:\Source\call51\Source\regression\sdcc_bugs\bug1115321.c:114: while( (buffer <  end) && ('\0' != *format) ) {
0265            735   L008034?:
0265 E500       736            mov     a,_bp
0267 24FB       737            add     a,#0xfb
0269 F8         738            mov     r0,a
026A C3         739            clr     c
026B E6         740            mov     a,@r0
026C 9D         741            subb    a,r5
026D 08         742            inc     r0
026E E6         743            mov     a,@r0
026F 9E         744            subb    a,r6
0270 08         745            inc     r0
0271 E6         746            mov     a,@r0
0272 6480       747            xrl     a,#0x80
0274 8FF0       748            mov     b,r7
0276 63F080     749            xrl     b,#0x80
0279 95F0       750            subb    a,b
027B 4001       751            jc      L008071?
027D 020100     752            ljmp    L008037?
0280            753   L008071?:
0280 E500       754            mov     a,_bp
0282 24F7       755            add     a,#0xf7
0284 F8         756            mov     r0,a
0285 8603       757            mov     ar3,@r0
0287 08         758            inc     r0
0288 8604       759            mov     ar4,@r0
028A 08         760            inc     r0
028B 8602       761            mov     ar2,@r0
028D 8B82       762            mov     dpl,r3
028F 8C83       763            mov     dph,r4
0291 8AF0       764            mov     b,r2
0293 E500       765            mov     a,_bp
0295 240D       766            add     a,#0x0d
0297 F8         767            mov     r0,a
0298 120100     768            lcall   __gptrget
029B F6         769            mov     @r0,a
029C E500       770            mov     a,_bp
029E 240D       771            add     a,#0x0d
02A0 F8         772            mov     r0,a
02A1 B60038     773            cjne    @r0,#0x00,L008072?
02A4 020100     774            ljmp    L008037?
02A7            775   L008072?:
02A7            776   ;        C:\Source\call51\Source\regression\sdcc_bugs\bug1115321.c:115: if( '%' == *format ) {
02A7 E500       777            mov     a,_bp
02A9 240D       778            add     a,#0x0d
02AB F8         779            mov     r0,a
02AC B62578     780            cjne    @r0,#0x25,L008073?
02AF 8001       781            sjmp    L008074?
02B1            782   L008073?:
02B1 020100     783            ljmp    L008031?
02B4            784   L008074?:
02B4            785   ;        C:\Source\call51\Source\regression\sdcc_bugs\bug1115321.c:116: format++;
02B4 E500       786            mov     a,_bp
02B6 24F7       787            add     a,#0xf7
02B8 F8         788            mov     r0,a
02B9 7401       789            mov     a,#0x01
02BB 2B         790            add     a,r3
02BC F6         791            mov     @r0,a
02BD E4         792            clr     a
02BE 3C         793            addc    a,r4
02BF 08         794            inc     r0
02C0 F6         795            mov     @r0,a
02C1 08         796            inc     r0
02C2 A602       797            mov     @r0,ar2
02C4            798   ;        C:\Source\call51\Source\regression\sdcc_bugs\bug1115321.c:117: switch( *format ) {
02C4 E500       799            mov     a,_bp
02C6 24F7       800            add     a,#0xf7
02C8 F8         801            mov     r0,a
02C9 8602       802            mov     ar2,@r0
02CB 08         803            inc     r0
02CC 8603       804            mov     ar3,@r0
02CE 08         805            inc     r0
02CF 8604       806            mov     ar4,@r0
02D1 8A82       807            mov     dpl,r2
02D3 8B83       808            mov     dph,r3
02D5 8CF0       809            mov     b,r4
02D7 120100     810            lcall   __gptrget
02DA FA         811            mov     r2,a
02DB BA2540     812            cjne    r2,#0x25,L008075?
02DE 8001       813            sjmp    L008002?
02E0            814   L008075?:
02E0 BA63C0     815            cjne    r2,#0x63,L008076?
02E3 8001       816            sjmp    L008077?
02E5            817   L008076?:
02E5 020100     818            ljmp    L008003?
02E8            819   L008077?:
02E8            820   ;        C:\Source\call51\Source\regression\sdcc_bugs\bug1115321.c:120: *buffer = VA_ARG( args, VA_ARG_CHAR );
02E8 C005       821            push    ar5
02EA C006       822            push    ar6
02EC C007       823            push    ar7
02EE E500       824            mov     a,_bp
02F0 24FB       825            add     a,#0xfb
02F2 F8         826            mov     r0,a
02F3 8603       827            mov     ar3,@r0
02F5 08         828            inc     r0
02F6 8604       829            mov     ar4,@r0
02F8 08         830            inc     r0
02F9 8605       831            mov     ar5,@r0
02FB A900       832            mov     r1,_bp
02FD 09         833            inc     r1
02FE E7         834            mov     a,@r1
02FF 14         835            dec     a
0300 F8         836            mov     r0,a
0301 A900       837            mov     r1,_bp
0303 09         838            inc     r1
0304 A700       839            mov     @r1,ar0
0306 8606       840            mov     ar6,@r0
0308 8B82       841            mov     dpl,r3
030A 8C83       842            mov     dph,r4
030C 8DF0       843            mov     b,r5
030E EE         844            mov     a,r6
030F 120100     845            lcall   __gptrput
0312            846   ;        C:\Source\call51\Source\regression\sdcc_bugs\bug1115321.c:121: buffer++;
0312 E500       847            mov     a,_bp
0314 24FB       848            add     a,#0xfb
0316 F8         849            mov     r0,a
0317 7401       850            mov     a,#0x01
0319 2B         851            add     a,r3
031A F6         852            mov     @r0,a
031B E4         853            clr     a
031C 3C         854            addc    a,r4
031D 08         855            inc     r0
031E F6         856            mov     @r0,a
031F 08         857            inc     r0
0320 A605       858            mov     @r0,ar5
0322            859   ;        C:\Source\call51\Source\regression\sdcc_bugs\bug1115321.c:122: break;
0322 D007       860            pop     ar7
0324 D006       861            pop     ar6
0326 D005       862            pop     ar5
0328 020100     863            ljmp    L008032?
032B            864   ;        C:\Source\call51\Source\regression\sdcc_bugs\bug1115321.c:125: case '%':
032B            865   L008002?:
032B            866   ;        C:\Source\call51\Source\regression\sdcc_bugs\bug1115321.c:126: *buffer = '%';
032B C005       867            push    ar5
032D C006       868            push    ar6
032F C007       869            push    ar7
0331 E500       870            mov     a,_bp
0333 24FB       871            add     a,#0xfb
0335 F8         872            mov     r0,a
0336 8603       873            mov     ar3,@r0
0338 08         874            inc     r0
0339 8604       875            mov     ar4,@r0
033B 08         876            inc     r0
033C 8605       877            mov     ar5,@r0
033E 8B82       878            mov     dpl,r3
0340 8C83       879            mov     dph,r4
0342 8DF0       880            mov     b,r5
0344 7425       881            mov     a,#0x25
0346 120100     882            lcall   __gptrput
0349            883   ;        C:\Source\call51\Source\regression\sdcc_bugs\bug1115321.c:127: buffer++;
0349 E500       884            mov     a,_bp
034B 24FB       885            add     a,#0xfb
034D F8         886            mov     r0,a
034E 7401       887            mov     a,#0x01
0350 2B         888            add     a,r3
0351 F6         889            mov     @r0,a
0352 E4         890            clr     a
0353 3C         891            addc    a,r4
0354 08         892            inc     r0
0355 F6         893            mov     @r0,a
0356 08         894            inc     r0
0357 A605       895            mov     @r0,ar5
0359            896   ;        C:\Source\call51\Source\regression\sdcc_bugs\bug1115321.c:128: break;
0359 D007       897            pop     ar7
035B D006       898            pop     ar6
035D D005       899            pop     ar5
035F 020100     900            ljmp    L008032?
0362            901   ;        C:\Source\call51\Source\regression\sdcc_bugs\bug1115321.c:130: default:
0362            902   L008003?:
0362            903   ;        C:\Source\call51\Source\regression\sdcc_bugs\bug1115321.c:132: char padding = ' ';
0362 E500       904            mov     a,_bp
0364 2405       905            add     a,#0x05
0366 F8         906            mov     r0,a
0367 7620       907            mov     @r0,#0x20
0369            908   ;        C:\Source\call51\Source\regression\sdcc_bugs\bug1115321.c:133: short digits = 0;
0369 E500       909            mov     a,_bp
036B 2406       910            add     a,#0x06
036D F8         911            mov     r0,a
036E E4         912            clr     a
036F F6         913            mov     @r0,a
0370 08         914            inc     r0
0371 F6         915            mov     @r0,a
0372            916   ;        C:\Source\call51\Source\regression\sdcc_bugs\bug1115321.c:136: switch( *format ) {
0372 BA2000     917            cjne    r2,#0x20,L008078?
0375 8001       918            sjmp    L008005?
0377            919   L008078?:
0377 BA3080     920            cjne    r2,#0x30,L008053?
037A            921   ;        C:\Source\call51\Source\regression\sdcc_bugs\bug1115321.c:138: padding = '0';
037A E500       922            mov     a,_bp
037C 2405       923            add     a,#0x05
037E F8         924            mov     r0,a
037F 7630       925            mov     @r0,#0x30
0381            926   ;        C:\Source\call51\Source\regression\sdcc_bugs\bug1115321.c:139: case ' ':
0381            927   L008005?:
0381            928   ;        C:\Source\call51\Source\regression\sdcc_bugs\bug1115321.c:140: format++;
0381 E500       929            mov     a,_bp
0383 24F7       930            add     a,#0xf7
0385 F8         931            mov     r0,a
0386 06         932            inc     @r0
0387 B600C0     933            cjne    @r0,#0x00,L008081?
038A 08         934            inc     r0
038B 06         935            inc     @r0
038C            936   L008081?:
038C            937   ;        C:\Source\call51\Source\regression\sdcc_bugs\bug1115321.c:145: while(    ('\0' != *format)
038C            938   L008053?:
038C E500       939            mov     a,_bp
038E 24F7       940            add     a,#0xf7
0390 F8         941            mov     r0,a
0391 8602       942            mov     ar2,@r0
0393 08         943            inc     r0
0394 8603       944            mov     ar3,@r0
0396 08         945            inc     r0
0397 8604       946            mov     ar4,@r0
0399            947   L008009?:
0399 8A82       948            mov     dpl,r2
039B 8B83       949            mov     dph,r3
039D 8CF0       950            mov     b,r4
039F E500       951            mov     a,_bp
03A1 240E       952            add     a,#0x0e
03A3 F8         953            mov     r0,a
03A4 120100     954            lcall   __gptrget
03A7 F6         955            mov     @r0,a
03A8 E500       956            mov     a,_bp
03AA 240E       957            add     a,#0x0e
03AC F8         958            mov     r0,a
03AD B60040     959            cjne    @r0,#0x00,L008082?
03B0 020100     960            ljmp    L008067?
03B3            961   L008082?:
03B3            962   ;        C:\Source\call51\Source\regression\sdcc_bugs\bug1115321.c:146: && ((*format >= '0') && (*format <= '9')) )
03B3 E500       963            mov     a,_bp
03B5 240E       964            add     a,#0x0e
03B7 F8         965            mov     r0,a
03B8 C3         966            clr     c
03B9 E6         967            mov     a,@r0
03BA 6480       968            xrl     a,#0x80
03BC 94B0       969            subb    a,#0xb0
03BE 5001       970            jnc     L008083?
03C0 020100     971            ljmp    L008067?
03C3            972   L008083?:
03C3 E500       973            mov     a,_bp
03C5 240E       974            add     a,#0x0e
03C7 F8         975            mov     r0,a
03C8 C3         976            clr     c
03C9 74B9       977            mov     a,#(0x39 ^ 0x80)
03CB 86F0       978            mov     b,@r0
03CD 63F080     979            xrl     b,#0x80
03D0 95F0       980            subb    a,b
03D2 5001       981            jnc     L008084?
03D4 020100     982            ljmp    L008067?
03D7            983   L008084?:
03D7            984   ;        C:\Source\call51\Source\regression\sdcc_bugs\bug1115321.c:148: digits = digits * 10 + (*format - '0');
03D7 C005       985            push    ar5
03D9 C006       986            push    ar6
03DB C007       987            push    ar7
03DD E500       988            mov     a,_bp
03DF 2406       989            add     a,#0x06
03E1 F8         990            mov     r0,a
03E2 8600       991            mov     __mulint_PARM_2,@r0
03E4 08         992            inc     r0
03E5 8601       993            mov     (__mulint_PARM_2 + 1),@r0
03E7 90000A     994            mov     dptr,#0x000A
03EA C002       995            push    ar2
03EC C003       996            push    ar3
03EE C004       997            push    ar4
03F0 C005       998            push    ar5
03F2 C006       999            push    ar6
03F4 C007      1000            push    ar7
03F6 120100    1001            lcall   __mulint
03F9 C8        1002            xch     a,r0
03FA E500      1003            mov     a,_bp
03FC 240F      1004            add     a,#0x0f
03FE C8        1005            xch     a,r0
03FF A682      1006            mov     @r0,dpl
0401 08        1007            inc     r0
0402 A683      1008            mov     @r0,dph
0404 D007      1009            pop     ar7
0406 D006      1010            pop     ar6
0408 D005      1011            pop     ar5
040A D004      1012            pop     ar4
040C D003      1013            pop     ar3
040E D002      1014            pop     ar2
0410 E500      1015            mov     a,_bp
0412 240E      1016            add     a,#0x0e
0414 F8        1017            mov     r0,a
0415 8607      1018            mov     ar7,@r0
0417 E6        1019            mov     a,@r0
0418 33        1020            rlc     a
0419 95E0      1021            subb    a,acc
041B FD        1022            mov     r5,a
041C EF        1023            mov     a,r7
041D 24D0      1024            add     a,#0xd0
041F FF        1025            mov     r7,a
0420 ED        1026            mov     a,r5
0421 34FF      1027            addc    a,#0xff
0423 FD        1028            mov     r5,a
0424 E500      1029            mov     a,_bp
0426 240F      1030            add     a,#0x0f
0428 F8        1031            mov     r0,a
0429 EF        1032            mov     a,r7
042A 26        1033            add     a,@r0
042B FF        1034            mov     r7,a
042C ED        1035            mov     a,r5
042D 08        1036            inc     r0
042E 36        1037            addc    a,@r0
042F FD        1038            mov     r5,a
0430 E500      1039            mov     a,_bp
0432 2406      1040            add     a,#0x06
0434 F8        1041            mov     r0,a
0435 A607      1042            mov     @r0,ar7
0437 08        1043            inc     r0
0438 A605      1044            mov     @r0,ar5
043A           1045   ;        C:\Source\call51\Source\regression\sdcc_bugs\bug1115321.c:149: format++;
043A 0A        1046            inc     r2
043B BA00C0    1047            cjne    r2,#0x00,L008085?
043E 0B        1048            inc     r3
043F           1049   L008085?:
043F E500      1050            mov     a,_bp
0441 24F7      1051            add     a,#0xf7
0443 F8        1052            mov     r0,a
0444 A602      1053            mov     @r0,ar2
0446 08        1054            inc     r0
0447 A603      1055            mov     @r0,ar3
0449 08        1056            inc     r0
044A A604      1057            mov     @r0,ar4
044C D007      1058            pop     ar7
044E D006      1059            pop     ar6
0450 D005      1060            pop     ar5
0452 020100    1061            ljmp    L008009?
0455           1062   L008067?:
0455 E500      1063            mov     a,_bp
0457 24F7      1064            add     a,#0xf7
0459 F8        1065            mov     r0,a
045A A602      1066            mov     @r0,ar2
045C 08        1067            inc     r0
045D A603      1068            mov     @r0,ar3
045F 08        1069            inc     r0
0460 A604      1070            mov     @r0,ar4
0462           1071   ;        C:\Source\call51\Source\regression\sdcc_bugs\bug1115321.c:152: switch( *format ) {
0462 8A82      1072            mov     dpl,r2
0464 8B83      1073            mov     dph,r3
0466 8CF0      1074            mov     b,r4
0468 120100    1075            lcall   __gptrget
046B FA        1076            mov     r2,a
046C BA7300    1077            cjne    r2,#0x73,L008086?
046F 8001      1078            sjmp    L008087?
0471           1079   L008086?:
0471 020100    1080            ljmp    L008037?
0474           1081   L008087?:
0474           1082   ;        C:\Source\call51\Source\regression\sdcc_bugs\bug1115321.c:158: val = VA_ARG( args, char * );
0474 A900      1083            mov     r1,_bp
0476 09        1084            inc     r1
0477 E7        1085            mov     a,@r1
0478 24FD      1086            add     a,#0xfd
047A F8        1087            mov     r0,a
047B A900      1088            mov     r1,_bp
047D 09        1089            inc     r1
047E A700      1090            mov     @r1,ar0
0480 8602      1091            mov     ar2,@r0
0482 08        1092            inc     r0
0483 8603      1093            mov     ar3,@r0
0485 08        1094            inc     r0
0486 8604      1095            mov     ar4,@r0
0488 18        1096            dec     r0
0489 18        1097            dec     r0
048A E500      1098            mov     a,_bp
048C 2408      1099            add     a,#0x08
048E F8        1100            mov     r0,a
048F A602      1101            mov     @r0,ar2
0491 08        1102            inc     r0
0492 A603      1103            mov     @r0,ar3
0494 08        1104            inc     r0
0495 A604      1105            mov     @r0,ar4
0497           1106   ;        C:\Source\call51\Source\regression\sdcc_bugs\bug1115321.c:162: while( '\0' != *val_end ) { val_end++; }
0497 E500      1107            mov     a,_bp
0499 2408      1108            add     a,#0x08
049B F8        1109            mov     r0,a
049C 8602      1110            mov     ar2,@r0
049E 08        1111            inc     r0
049F 8603      1112            mov     ar3,@r0
04A1 08        1113            inc     r0
04A2 8604      1114            mov     ar4,@r0
04A4           1115   L008013?:
04A4 C005      1116            push    ar5
04A6 C006      1117            push    ar6
04A8 C007      1118            push    ar7
04AA 8A82      1119            mov     dpl,r2
04AC 8B83      1120            mov     dph,r3
04AE 8CF0      1121            mov     b,r4
04B0 120100    1122            lcall   __gptrget
04B3 FD        1123            mov     r5,a
04B4 BD00C0    1124            cjne    r5,#0x00,L008088?
04B7 D007      1125            pop     ar7
04B9 D006      1126            pop     ar6
04BB D005      1127            pop     ar5
04BD 8001      1128            sjmp    L008015?
04BF           1129   L008088?:
04BF D007      1130            pop     ar7
04C1 D006      1131            pop     ar6
04C3 D005      1132            pop     ar5
04C5 0A        1133            inc     r2
04C6 BA0080    1134            cjne    r2,#0x00,L008013?
04C9 0B        1135            inc     r3
04CA 8001      1136            sjmp    L008013?
04CC           1137   L008015?:
04CC           1138   ;        C:\Source\call51\Source\regression\sdcc_bugs\bug1115321.c:164: length = val_end - val;
04CC E500      1139            mov     a,_bp
04CE 2408      1140            add     a,#0x08
04D0 F8        1141            mov     r0,a
04D1 EA        1142            mov     a,r2
04D2 C3        1143            clr     c
04D3 96        1144            subb    a,@r0
04D4 FA        1145            mov     r2,a
04D5 EB        1146            mov     a,r3
04D6 08        1147            inc     r0
04D7 96        1148            subb    a,@r0
04D8 FB        1149            mov     r3,a
04D9 E500      1150            mov     a,_bp
04DB 240B      1151            add     a,#0x0b
04DD F8        1152            mov     r0,a
04DE A602      1153            mov     @r0,ar2
04E0 08        1154            inc     r0
04E1 A603      1155            mov     @r0,ar3
04E3           1156   ;        C:\Source\call51\Source\regression\sdcc_bugs\bug1115321.c:167: if( (digits > 0) && (length > digits) ) {
04E3 E500      1157            mov     a,_bp
04E5 2406      1158            add     a,#0x06
04E7 F8        1159            mov     r0,a
04E8 C3        1160            clr     c
04E9 E4        1161            clr     a
04EA 96        1162            subb    a,@r0
04EB E4        1163            clr     a
04EC 6480      1164            xrl     a,#0x80
04EE 08        1165            inc     r0
04EF 86F0      1166            mov     b,@r0
04F1 63F080    1167            xrl     b,#0x80
04F4 95F0      1168            subb    a,b
04F6 5001      1169            jnc     L008061?
04F8 E500      1170            mov     a,_bp
04FA 240B      1171            add     a,#0x0b
04FC F8        1172            mov     r0,a
04FD E500      1173            mov     a,_bp
04FF 2406      1174            add     a,#0x06
0501 F9        1175            mov     r1,a
0502 C3        1176            clr     c
0503 E7        1177            mov     a,@r1
0504 96        1178            subb    a,@r0
0505 09        1179            inc     r1
0506 E7        1180            mov     a,@r1
0507 6480      1181            xrl     a,#0x80
0509 08        1182            inc     r0
050A 86F0      1183            mov     b,@r0
050C 63F080    1184            xrl     b,#0x80
050F 95F0      1185            subb    a,b
0511 5001      1186            jnc     L008061?
0513           1187   ;        C:\Source\call51\Source\regression\sdcc_bugs\bug1115321.c:168: length = digits;
0513 E500      1188            mov     a,_bp
0515 2406      1189            add     a,#0x06
0517 F8        1190            mov     r0,a
0518 E500      1191            mov     a,_bp
051A 240B      1192            add     a,#0x0b
051C F9        1193            mov     r1,a
051D E6        1194            mov     a,@r0
051E F7        1195            mov     @r1,a
051F 08        1196            inc     r0
0520 09        1197            inc     r1
0521 E6        1198            mov     a,@r0
0522 F7        1199            mov     @r1,a
0523           1200   ;        C:\Source\call51\Source\regression\sdcc_bugs\bug1115321.c:172: while( (digits > length) && (buffer < end) ) {
0523           1201   L008061?:
0523 E500      1202            mov     a,_bp
0525 24FB      1203            add     a,#0xfb
0527 F8        1204            mov     r0,a
0528 8604      1205            mov     ar4,@r0
052A 08        1206            inc     r0
052B 8602      1207            mov     ar2,@r0
052D 08        1208            inc     r0
052E 8603      1209            mov     ar3,@r0
0530 E500      1210            mov     a,_bp
0532 2406      1211            add     a,#0x06
0534 F8        1212            mov     r0,a
0535 E500      1213            mov     a,_bp
0537 240F      1214            add     a,#0x0f
0539 F9        1215            mov     r1,a
053A E6        1216            mov     a,@r0
053B F7        1217            mov     @r1,a
053C 08        1218            inc     r0
053D 09        1219            inc     r1
053E E6        1220            mov     a,@r0
053F F7        1221            mov     @r1,a
0540           1222   L008020?:
0540 E500      1223            mov     a,_bp
0542 240F      1224            add     a,#0x0f
0544 F8        1225            mov     r0,a
0545 E500      1226            mov     a,_bp
0547 240B      1227            add     a,#0x0b
0549 F9        1228            mov     r1,a
054A C3        1229            clr     c
054B E7        1230            mov     a,@r1
054C 96        1231            subb    a,@r0
054D 09        1232            inc     r1
054E E7        1233            mov     a,@r1
054F 6480      1234            xrl     a,#0x80
0551 08        1235            inc     r0
0552 86F0      1236            mov     b,@r0
0554 63F080    1237            xrl     b,#0x80
0557 95F0      1238            subb    a,b
0559 5001      1239            jnc     L008064?
055B C3        1240            clr     c
055C EC        1241            mov     a,r4
055D 9D        1242            subb    a,r5
055E EA        1243            mov     a,r2
055F 9E        1244            subb    a,r6
0560 EB        1245            mov     a,r3
0561 6480      1246            xrl     a,#0x80
0563 8FF0      1247            mov     b,r7
0565 63F080    1248            xrl     b,#0x80
0568 95F0      1249            subb    a,b
056A 5001      1250            jnc     L008064?
056C           1251   ;        C:\Source\call51\Source\regression\sdcc_bugs\bug1115321.c:173: *buffer = padding;
056C 8C82      1252            mov     dpl,r4
056E 8A83      1253            mov     dph,r2
0570 8BF0      1254            mov     b,r3
0572 E500      1255            mov     a,_bp
0574 2405      1256            add     a,#0x05
0576 F8        1257            mov     r0,a
0577 E6        1258            mov     a,@r0
0578 120100    1259            lcall   __gptrput
057B A3        1260            inc     dptr
057C AC82      1261            mov     r4,dpl
057E AA83      1262            mov     r2,dph
0580           1263   ;        C:\Source\call51\Source\regression\sdcc_bugs\bug1115321.c:174: buffer++;
0580 E500      1264            mov     a,_bp
0582 24FB      1265            add     a,#0xfb
0584 F8        1266            mov     r0,a
0585 A604      1267            mov     @r0,ar4
0587 08        1268            inc     r0
0588 A602      1269            mov     @r0,ar2
058A 08        1270            inc     r0
058B A603      1271            mov     @r0,ar3
058D           1272   ;        C:\Source\call51\Source\regression\sdcc_bugs\bug1115321.c:175: digits--;
058D E500      1273            mov     a,_bp
058F 240F      1274            add     a,#0x0f
0591 F8        1275            mov     r0,a
0592 16        1276            dec     @r0
0593 B6FF80    1277            cjne    @r0,#0xff,L008020?
0596 08        1278            inc     r0
0597 16        1279            dec     @r0
0598           1280   ;        C:\Source\call51\Source\regression\sdcc_bugs\bug1115321.c:179: while( (length > 0) && (buffer < end) ) {
0598 8001      1281            sjmp    L008020?
059A           1282   L008064?:
059A E500      1283            mov     a,_bp
059C 2408      1284            add     a,#0x08
059E F8        1285            mov     r0,a
059F E500      1286            mov     a,_bp
05A1 2411      1287            add     a,#0x11
05A3 F9        1288            mov     r1,a
05A4 E6        1289            mov     a,@r0
05A5 F7        1290            mov     @r1,a
05A6 08        1291            inc     r0
05A7 09        1292            inc     r1
05A8 E6        1293            mov     a,@r0
05A9 F7        1294            mov     @r1,a
05AA 08        1295            inc     r0
05AB 09        1296            inc     r1
05AC E6        1297            mov     a,@r0
05AD F7        1298            mov     @r1,a
05AE E500      1299            mov     a,_bp
05B0 240B      1300            add     a,#0x0b
05B2 F8        1301            mov     r0,a
05B3 E500      1302            mov     a,_bp
05B5 240F      1303            add     a,#0x0f
05B7 F9        1304            mov     r1,a
05B8 E6        1305            mov     a,@r0
05B9 F7        1306            mov     @r1,a
05BA 08        1307            inc     r0
05BB 09        1308            inc     r1
05BC E6        1309            mov     a,@r0
05BD F7        1310            mov     @r1,a
05BE           1311   L008024?:
05BE E500      1312            mov     a,_bp
05C0 240F      1313            add     a,#0x0f
05C2 F8        1314            mov     r0,a
05C3 C3        1315            clr     c
05C4 E4        1316            clr     a
05C5 96        1317            subb    a,@r0
05C6 E4        1318            clr     a
05C7 6480      1319            xrl     a,#0x80
05C9 08        1320            inc     r0
05CA 86F0      1321            mov     b,@r0
05CC 63F080    1322            xrl     b,#0x80
05CF 95F0      1323            subb    a,b
05D1 4001      1324            jc      L008094?
05D3 020100    1325            ljmp    L008070?
05D6           1326   L008094?:
05D6 C3        1327            clr     c
05D7 EC        1328            mov     a,r4
05D8 9D        1329            subb    a,r5
05D9 EA        1330            mov     a,r2
05DA 9E        1331            subb    a,r6
05DB EB        1332            mov     a,r3
05DC 6480      1333            xrl     a,#0x80
05DE 8FF0      1334            mov     b,r7
05E0 63F080    1335            xrl     b,#0x80
05E3 95F0      1336            subb    a,b
05E5 4001      1337            jc      L008095?
05E7 020100    1338            ljmp    L008070?
05EA           1339   L008095?:
05EA           1340   ;        C:\Source\call51\Source\regression\sdcc_bugs\bug1115321.c:180: *buffer = *val;
05EA C005      1341            push    ar5
05EC C006      1342            push    ar6
05EE C007      1343            push    ar7
05F0 E500      1344            mov     a,_bp
05F2 2411      1345            add     a,#0x11
05F4 F8        1346            mov     r0,a
05F5 8682      1347            mov     dpl,@r0
05F7 08        1348            inc     r0
05F8 8683      1349            mov     dph,@r0
05FA 08        1350            inc     r0
05FB 86F0      1351            mov     b,@r0
05FD 120100    1352            lcall   __gptrget
0600 FD        1353            mov     r5,a
0601 A3        1354            inc     dptr
0602 18        1355            dec     r0
0603 18        1356            dec     r0
0604 A682      1357            mov     @r0,dpl
0606 08        1358            inc     r0
0607 A683      1359            mov     @r0,dph
0609 8C82      1360            mov     dpl,r4
060B 8A83      1361            mov     dph,r2
060D 8BF0      1362            mov     b,r3
060F ED        1363            mov     a,r5
0610 120100    1364            lcall   __gptrput
0613 A3        1365            inc     dptr
0614 AC82      1366            mov     r4,dpl
0616 AA83      1367            mov     r2,dph
0618           1368   ;        C:\Source\call51\Source\regression\sdcc_bugs\bug1115321.c:181: buffer++;
0618 E500      1369            mov     a,_bp
061A 24FB      1370            add     a,#0xfb
061C F8        1371            mov     r0,a
061D A604      1372            mov     @r0,ar4
061F 08        1373            inc     r0
0620 A602      1374            mov     @r0,ar2
0622 08        1375            inc     r0
0623 A603      1376            mov     @r0,ar3
0625           1377   ;        C:\Source\call51\Source\regression\sdcc_bugs\bug1115321.c:182: val++;
0625           1378   ;        C:\Source\call51\Source\regression\sdcc_bugs\bug1115321.c:183: length--;
0625 E500      1379            mov     a,_bp
0627 240F      1380            add     a,#0x0f
0629 F8        1381            mov     r0,a
062A 16        1382            dec     @r0
062B B6FF00    1383            cjne    @r0,#0xff,L008096?
062E 08        1384            inc     r0
062F 16        1385            dec     @r0
0630           1386   L008096?:
0630 D007      1387            pop     ar7
0632 D006      1388            pop     ar6
0634 D005      1389            pop     ar5
0636           1390   ;        C:\Source\call51\Source\regression\sdcc_bugs\bug1115321.c:194: }
0636 8001      1391            sjmp    L008024?
0638           1392   L008031?:
0638           1393   ;        C:\Source\call51\Source\regression\sdcc_bugs\bug1115321.c:196: *buffer = *format;
0638 C005      1394            push    ar5
063A C006      1395            push    ar6
063C C007      1396            push    ar7
063E E500      1397            mov     a,_bp
0640 24FB      1398            add     a,#0xfb
0642 F8        1399            mov     r0,a
0643 8605      1400            mov     ar5,@r0
0645 08        1401            inc     r0
0646 8606      1402            mov     ar6,@r0
0648 08        1403            inc     r0
0649 8607      1404            mov     ar7,@r0
064B 8D82      1405            mov     dpl,r5
064D 8E83      1406            mov     dph,r6
064F 8FF0      1407            mov     b,r7
0651 E500      1408            mov     a,_bp
0653 240D      1409            add     a,#0x0d
0655 F8        1410            mov     r0,a
0656 E6        1411            mov     a,@r0
0657 120100    1412            lcall   __gptrput
065A           1413   ;        C:\Source\call51\Source\regression\sdcc_bugs\bug1115321.c:197: buffer++;
065A E500      1414            mov     a,_bp
065C 24FB      1415            add     a,#0xfb
065E F8        1416            mov     r0,a
065F 7401      1417            mov     a,#0x01
0661 2D        1418            add     a,r5
0662 F6        1419            mov     @r0,a
0663 E4        1420            clr     a
0664 3E        1421            addc    a,r6
0665 08        1422            inc     r0
0666 F6        1423            mov     @r0,a
0667 08        1424            inc     r0
0668 A607      1425            mov     @r0,ar7
066A           1426   ;        C:\Source\call51\Source\regression\sdcc_bugs\bug1115321.c:213: return (buffer - start);
066A D007      1427            pop     ar7
066C D006      1428            pop     ar6
066E D005      1429            pop     ar5
0670           1430   ;        C:\Source\call51\Source\regression\sdcc_bugs\bug1115321.c:197: buffer++;
0670 8001      1431            sjmp    L008032?
0672           1432   L008070?:
0672 E500      1433            mov     a,_bp
0674 24FB      1434            add     a,#0xfb
0676 F8        1435            mov     r0,a
0677 A604      1436            mov     @r0,ar4
0679 08        1437            inc     r0
067A A602      1438            mov     @r0,ar2
067C 08        1439            inc     r0
067D A603      1440            mov     @r0,ar3
067F           1441   L008032?:
067F           1442   ;        C:\Source\call51\Source\regression\sdcc_bugs\bug1115321.c:200: format++;
067F E500      1443            mov     a,_bp
0681 24F7      1444            add     a,#0xf7
0683 F8        1445            mov     r0,a
0684 06        1446            inc     @r0
0685 B60040    1447            cjne    @r0,#0x00,L008097?
0688 08        1448            inc     r0
0689 06        1449            inc     @r0
068A           1450   L008097?:
068A 020100    1451            ljmp    L008034?
068D           1452   ;        C:\Source\call51\Source\regression\sdcc_bugs\bug1115321.c:203: clean_and_bail:
068D           1453   L008037?:
068D           1454   ;        C:\Source\call51\Source\regression\sdcc_bugs\bug1115321.c:204: if( buffer < end ) {
068D E500      1455            mov     a,_bp
068F 24FB      1456            add     a,#0xfb
0691 F8        1457            mov     r0,a
0692 C3        1458            clr     c
0693 E6        1459            mov     a,@r0
0694 9D        1460            subb    a,r5
0695 08        1461            inc     r0
0696 E6        1462            mov     a,@r0
0697 9E        1463            subb    a,r6
0698 08        1464            inc     r0
0699 E6        1465            mov     a,@r0
069A 6480      1466            xrl     a,#0x80
069C 8FF0      1467            mov     b,r7
069E 63F080    1468            xrl     b,#0x80
06A1 95F0      1469            subb    a,b
06A3 5001      1470            jnc     L008039?
06A5           1471   ;        C:\Source\call51\Source\regression\sdcc_bugs\bug1115321.c:205: *buffer = '\0';
06A5 E500      1472            mov     a,_bp
06A7 24FB      1473            add     a,#0xfb
06A9 F8        1474            mov     r0,a
06AA 8602      1475            mov     ar2,@r0
06AC 08        1476            inc     r0
06AD 8603      1477            mov     ar3,@r0
06AF 08        1478            inc     r0
06B0 8604      1479            mov     ar4,@r0
06B2 8A82      1480            mov     dpl,r2
06B4 8B83      1481            mov     dph,r3
06B6 8CF0      1482            mov     b,r4
06B8 E4        1483            clr     a
06B9 120100    1484            lcall   __gptrput
06BC           1485   ;        C:\Source\call51\Source\regression\sdcc_bugs\bug1115321.c:206: buffer++;
06BC E500      1486            mov     a,_bp
06BE 24FB      1487            add     a,#0xfb
06C0 F8        1488            mov     r0,a
06C1 7401      1489            mov     a,#0x01
06C3 2A        1490            add     a,r2
06C4 F6        1491            mov     @r0,a
06C5 E4        1492            clr     a
06C6 3B        1493            addc    a,r3
06C7 08        1494            inc     r0
06C8 F6        1495            mov     @r0,a
06C9 08        1496            inc     r0
06CA A604      1497            mov     @r0,ar4
06CC 8001      1498            sjmp    L008040?
06CE           1499   L008039?:
06CE           1500   ;        C:\Source\call51\Source\regression\sdcc_bugs\bug1115321.c:208: *(buffer-1) = '\0';
06CE E500      1501            mov     a,_bp
06D0 24FB      1502            add     a,#0xfb
06D2 F8        1503            mov     r0,a
06D3 E6        1504            mov     a,@r0
06D4 24FF      1505            add     a,#0xff
06D6 FA        1506            mov     r2,a
06D7 08        1507            inc     r0
06D8 E6        1508            mov     a,@r0
06D9 34FF      1509            addc    a,#0xff
06DB FB        1510            mov     r3,a
06DC 08        1511            inc     r0
06DD 8604      1512            mov     ar4,@r0
06DF 8A82      1513            mov     dpl,r2
06E1 8B83      1514            mov     dph,r3
06E3 8CF0      1515            mov     b,r4
06E5 E4        1516            clr     a
06E6 120100    1517            lcall   __gptrput
06E9           1518   L008040?:
06E9           1519   ;        C:\Source\call51\Source\regression\sdcc_bugs\bug1115321.c:213: return (buffer - start);
06E9 E500      1520            mov     a,_bp
06EB 24FB      1521            add     a,#0xfb
06ED F8        1522            mov     r0,a
06EE A900      1523            mov     r1,_bp
06F0 09        1524            inc     r1
06F1 09        1525            inc     r1
06F2 E6        1526            mov     a,@r0
06F3 C3        1527            clr     c
06F4 97        1528            subb    a,@r1
06F5 FA        1529            mov     r2,a
06F6 08        1530            inc     r0
06F7 E6        1531            mov     a,@r0
06F8 09        1532            inc     r1
06F9 97        1533            subb    a,@r1
06FA 8A82      1534            mov     dpl,r2
06FC 850081    1535            mov     sp,_bp
06FF D000      1536            pop     _bp
0701 22        1537            ret
0702           1538   ;------------------------------------------------------------
0702           1539   ;Allocation info for local variables in function 'test_s'
0702           1540   ;------------------------------------------------------------
0702           1541   ;buffer                    Allocated with name '_test_s_buffer_1_1'
0702           1542   ;ret                       Allocated to registers r2 r3 
0702           1543   ;i                         Allocated to registers r2 r3 
0702           1544   ;------------------------------------------------------------
0702           1545   ;        C:\Source\call51\Source\regression\sdcc_bugs\bug1115321.c:216: void test_s( void )
0702           1546   ;        -----------------------------------------
0702           1547   ;         function test_s
0702           1548   ;        -----------------------------------------
0702           1549   _test_s:
0702           1550   ;        C:\Source\call51\Source\regression\sdcc_bugs\bug1115321.c:222: for( i = 0; i < 31; i++ ) {
0702 7A00      1551            mov     r2,#0x00
0704 7B00      1552            mov     r3,#0x00
0706           1553   L009001?:
0706 C3        1554            clr     c
0707 EA        1555            mov     a,r2
0708 941F      1556            subb    a,#0x1F
070A EB        1557            mov     a,r3
070B 6480      1558            xrl     a,#0x80
070D 9480      1559            subb    a,#0x80
070F 5001      1560            jnc     L009004?
0711           1561   ;        C:\Source\call51\Source\regression\sdcc_bugs\bug1115321.c:223: buffer[i] = 'P';
0711 EA        1562            mov     a,r2
0712 24C8      1563            add     a,#_test_s_buffer_1_1
0714 F8        1564            mov     r0,a
0715 7650      1565            mov     @r0,#0x50
0717           1566   ;        C:\Source\call51\Source\regression\sdcc_bugs\bug1115321.c:222: for( i = 0; i < 31; i++ ) {
0717 0A        1567            inc     r2
0718 BA0000    1568            cjne    r2,#0x00,L009001?
071B 0B        1569            inc     r3
071C 8001      1570            sjmp    L009001?
071E           1571   L009004?:
071E           1572   ;        C:\Source\call51\Source\regression\sdcc_bugs\bug1115321.c:225: buffer[31] = '\0';
071E 75E700    1573            mov     (_test_s_buffer_1_1 + 0x001f),#0x00
0721           1574   ;        C:\Source\call51\Source\regression\sdcc_bugs\bug1115321.c:227: ret = C51_SNPRINTF( buffer, 32, "->|%%|<-" );
0721 7480      1575            mov     a,#__str_3
0723 C0E0      1576            push    acc
0725 7479      1577            mov     a,#(__str_3 >> 8)
0727 C0E0      1578            push    acc
0729 7480      1579            mov     a,#0x80
072B C0E0      1580            push    acc
072D 7420      1581            mov     a,#0x20
072F C0E0      1582            push    acc
0731 74C8      1583            mov     a,#_test_s_buffer_1_1
0733 C0E0      1584            push    acc
0735 7463      1585            mov     a,#(_test_s_buffer_1_1 >> 8)
0737 C0E0      1586            push    acc
0739 7440      1587            mov     a,#0x40
073B C0E0      1588            push    acc
073D 120100    1589            lcall   _snprintf
0740 AA82      1590            mov     r2,dpl
0742 E581      1591            mov     a,sp
0744 24F9      1592            add     a,#0xf9
0746 F581      1593            mov     sp,a
0748 7B00      1594            mov     r3,#0x00
074A           1595   ;        C:\Source\call51\Source\regression\sdcc_bugs\bug1115321.c:229: ASSERT (strcmp(buffer, "->|%|<-") == 0);
074A 0500      1596            inc     ___numTests
074C E4        1597            clr     a
074D B500C0    1598            cjne    a,___numTests,L009047?
0750 0501      1599            inc     (___numTests + 1)
0752           1600   L009047?:
0752 750040    1601            mov     _strcmp_PARM_2,#__str_4
0755 75017A    1602            mov     (_strcmp_PARM_2 + 1),#(__str_4 >> 8)
0758 750280    1603            mov     (_strcmp_PARM_2 + 2),#0x80
075B 9063C8    1604            mov     dptr,#_test_s_buffer_1_1
075E 75F040    1605            mov     b,#0x40
0761 C002      1606            push    ar2
0763 C003      1607            push    ar3
0765 120100    1608            lcall   _strcmp
0768 AC82      1609            mov     r4,dpl
076A AD83      1610            mov     r5,dph
076C D003      1611            pop     ar3
076E D002      1612            pop     ar2
0770 EC        1613            mov     a,r4
0771 4D        1614            orl     a,r5
0772 B401C0    1615            cjne    a,#0x01,L009048?
0775           1616   L009048?:
0775 E4        1617            clr     a
0776 33        1618            rlc     a
0777 FC        1619            mov     r4,a
0778 7001      1620            jnz     L009008?
077A 758040    1621            mov     ___fail_PARM_2,#__str_6
077D 75817B    1622            mov     (___fail_PARM_2 + 1),#(__str_6 >> 8)
0780 754080    1623            mov     ___fail_PARM_3,#__str_7
0783 75417B    1624            mov     (___fail_PARM_3 + 1),#(__str_7 >> 8)
0786 7500E5    1625            mov     ___fail_PARM_4,#0xE5
0789 E4        1626            clr     a
078A F501      1627            mov     (___fail_PARM_4 + 1),a
078C 907BC0    1628            mov     dptr,#__str_5
078F C002      1629            push    ar2
0791 C003      1630            push    ar3
0793 120100    1631            lcall   ___fail
0796 D003      1632            pop     ar3
0798 D002      1633            pop     ar2
079A           1634   L009008?:
079A           1635   ;        C:\Source\call51\Source\regression\sdcc_bugs\bug1115321.c:230: ASSERT (ret == 8);
079A 0500      1636            inc     ___numTests
079C E4        1637            clr     a
079D B50000    1638            cjne    a,___numTests,L009050?
07A0 0501      1639            inc     (___numTests + 1)
07A2           1640   L009050?:
07A2 BA0840    1641            cjne    r2,#0x08,L009051?
07A5 BB0040    1642            cjne    r3,#0x00,L009051?
07A8 8001      1643            sjmp    L009010?
07AA           1644   L009051?:
07AA 7580C0    1645            mov     ___fail_PARM_2,#__str_8
07AD 75817C    1646            mov     (___fail_PARM_2 + 1),#(__str_8 >> 8)
07B0 754080    1647            mov     ___fail_PARM_3,#__str_7
07B3 75417B    1648            mov     (___fail_PARM_3 + 1),#(__str_7 >> 8)
07B6 7500E6    1649            mov     ___fail_PARM_4,#0xE6
07B9 E4        1650            clr     a
07BA F501      1651            mov     (___fail_PARM_4 + 1),a
07BC 907BC0    1652            mov     dptr,#__str_5
07BF 120100    1653            lcall   ___fail
07C2           1654   L009010?:
07C2           1655   ;        C:\Source\call51\Source\regression\sdcc_bugs\bug1115321.c:231: ret = C51_SNPRINTF( buffer, 32, "%s, %s.", "Hello", "world" );
07C2 7400      1656            mov     a,#__str_11
07C4 C0E0      1657            push    acc
07C6 747D      1658            mov     a,#(__str_11 >> 8)
07C8 C0E0      1659            push    acc
07CA 7480      1660            mov     a,#0x80
07CC C0E0      1661            push    acc
07CE 7440      1662            mov     a,#__str_10
07D0 C0E0      1663            push    acc
07D2 747D      1664            mov     a,#(__str_10 >> 8)
07D4 C0E0      1665            push    acc
07D6 7480      1666            mov     a,#0x80
07D8 C0E0      1667            push    acc
07DA 7480      1668            mov     a,#__str_9
07DC C0E0      1669            push    acc
07DE 747D      1670            mov     a,#(__str_9 >> 8)
07E0 C0E0      1671            push    acc
07E2 7480      1672            mov     a,#0x80
07E4 C0E0      1673            push    acc
07E6 7420      1674            mov     a,#0x20
07E8 C0E0      1675            push    acc
07EA 74C8      1676            mov     a,#_test_s_buffer_1_1
07EC C0E0      1677            push    acc
07EE 7463      1678            mov     a,#(_test_s_buffer_1_1 >> 8)
07F0 C0E0      1679            push    acc
07F2 7440      1680            mov     a,#0x40
07F4 C0E0      1681            push    acc
07F6 120100    1682            lcall   _snprintf
07F9 AC82      1683            mov     r4,dpl
07FB E581      1684            mov     a,sp
07FD 24F3      1685            add     a,#0xf3
07FF F581      1686            mov     sp,a
0801 8C02      1687            mov     ar2,r4
0803 7B00      1688            mov     r3,#0x00
0805           1689   ;        C:\Source\call51\Source\regression\sdcc_bugs\bug1115321.c:233: ASSERT (strcmp(buffer, "Hello, world.") == 0);
0805 0500      1690            inc     ___numTests
0807 E4        1691            clr     a
0808 B500C0    1692            cjne    a,___numTests,L009052?
080B 0501      1693            inc     (___numTests + 1)
080D           1694   L009052?:
080D 750000    1695            mov     _strcmp_PARM_2,#__str_12
0810 75017E    1696            mov     (_strcmp_PARM_2 + 1),#(__str_12 >> 8)
0813 750280    1697            mov     (_strcmp_PARM_2 + 2),#0x80
0816 9063C8    1698            mov     dptr,#_test_s_buffer_1_1
0819 75F040    1699            mov     b,#0x40
081C C002      1700            push    ar2
081E C003      1701            push    ar3
0820 120100    1702            lcall   _strcmp
0823 AC82      1703            mov     r4,dpl
0825 AD83      1704            mov     r5,dph
0827 D003      1705            pop     ar3
0829 D002      1706            pop     ar2
082B EC        1707            mov     a,r4
082C 4D        1708            orl     a,r5
082D B40140    1709            cjne    a,#0x01,L009053?
0830           1710   L009053?:
0830 E4        1711            clr     a
0831 33        1712            rlc     a
0832 FC        1713            mov     r4,a
0833 7001      1714            jnz     L009012?
0835 7580C0    1715            mov     ___fail_PARM_2,#__str_13
0838 75817E    1716            mov     (___fail_PARM_2 + 1),#(__str_13 >> 8)
083B 754080    1717            mov     ___fail_PARM_3,#__str_7
083E 75417B    1718            mov     (___fail_PARM_3 + 1),#(__str_7 >> 8)
0841 7500E9    1719            mov     ___fail_PARM_4,#0xE9
0844 E4        1720            clr     a
0845 F501      1721            mov     (___fail_PARM_4 + 1),a
0847 907BC0    1722            mov     dptr,#__str_5
084A C002      1723            push    ar2
084C C003      1724            push    ar3
084E 120100    1725            lcall   ___fail
0851 D003      1726            pop     ar3
0853 D002      1727            pop     ar2
0855           1728   L009012?:
0855           1729   ;        C:\Source\call51\Source\regression\sdcc_bugs\bug1115321.c:234: ASSERT (ret == 14);
0855 0500      1730            inc     ___numTests
0857 E4        1731            clr     a
0858 B50000    1732            cjne    a,___numTests,L009055?
085B 0501      1733            inc     (___numTests + 1)
085D           1734   L009055?:
085D BA0E40    1735            cjne    r2,#0x0E,L009056?
0860 BB0040    1736            cjne    r3,#0x00,L009056?
0863 8001      1737            sjmp    L009014?
0865           1738   L009056?:
0865 7580C0    1739            mov     ___fail_PARM_2,#__str_14
0868 75817F    1740            mov     (___fail_PARM_2 + 1),#(__str_14 >> 8)
086B 754080    1741            mov     ___fail_PARM_3,#__str_7
086E 75417B    1742            mov     (___fail_PARM_3 + 1),#(__str_7 >> 8)
0871 7500EA    1743            mov     ___fail_PARM_4,#0xEA
0874 E4        1744            clr     a
0875 F501      1745            mov     (___fail_PARM_4 + 1),a
0877 907BC0    1746            mov     dptr,#__str_5
087A 120100    1747            lcall   ___fail
087D           1748   L009014?:
087D           1749   ;        C:\Source\call51\Source\regression\sdcc_bugs\bug1115321.c:235: ret = C51_SNPRINTF( buffer, 32, "% 10s, % 10s.", "Hello", "world" );
087D 7400      1750            mov     a,#__str_11
087F C0E0      1751            push    acc
0881 747D      1752            mov     a,#(__str_11 >> 8)
0883 C0E0      1753            push    acc
0885 7480      1754            mov     a,#0x80
0887 C0E0      1755            push    acc
0889 7440      1756            mov     a,#__str_10
088B C0E0      1757            push    acc
088D 747D      1758            mov     a,#(__str_10 >> 8)
088F C0E0      1759            push    acc
0891 7480      1760            mov     a,#0x80
0893 C0E0      1761            push    acc
0895 7400      1762            mov     a,#__str_15
0897 C0E0      1763            push    acc
0899 7480      1764            mov     a,#(__str_15 >> 8)
089B C0E0      1765            push    acc
089D 7480      1766            mov     a,#0x80
089F C0E0      1767            push    acc
08A1 7420      1768            mov     a,#0x20
08A3 C0E0      1769            push    acc
08A5 74C8      1770            mov     a,#_test_s_buffer_1_1
08A7 C0E0      1771            push    acc
08A9 7463      1772            mov     a,#(_test_s_buffer_1_1 >> 8)
08AB C0E0      1773            push    acc
08AD 7440      1774            mov     a,#0x40
08AF C0E0      1775            push    acc
08B1 120100    1776            lcall   _snprintf
08B4 AC82      1777            mov     r4,dpl
08B6 E581      1778            mov     a,sp
08B8 24F3      1779            add     a,#0xf3
08BA F581      1780            mov     sp,a
08BC 8C02      1781            mov     ar2,r4
08BE 7B00      1782            mov     r3,#0x00
08C0           1783   ;        C:\Source\call51\Source\regression\sdcc_bugs\bug1115321.c:237: ASSERT (strcmp(buffer, "     Hello,      world.") == 0);
08C0 0500      1784            inc     ___numTests
08C2 E4        1785            clr     a
08C3 B50040    1786            cjne    a,___numTests,L009057?
08C6 0501      1787            inc     (___numTests + 1)
08C8           1788   L009057?:
08C8 750080    1789            mov     _strcmp_PARM_2,#__str_16
08CB 750180    1790            mov     (_strcmp_PARM_2 + 1),#(__str_16 >> 8)
08CE 750280    1791            mov     (_strcmp_PARM_2 + 2),#0x80
08D1 9063C8    1792            mov     dptr,#_test_s_buffer_1_1
08D4 75F040    1793            mov     b,#0x40
08D7 C002      1794            push    ar2
08D9 C003      1795            push    ar3
08DB 120100    1796            lcall   _strcmp
08DE AC82      1797            mov     r4,dpl
08E0 AD83      1798            mov     r5,dph
08E2 D003      1799            pop     ar3
08E4 D002      1800            pop     ar2
08E6 EC        1801            mov     a,r4
08E7 4D        1802            orl     a,r5
08E8 B401C0    1803            cjne    a,#0x01,L009058?
08EB           1804   L009058?:
08EB E4        1805            clr     a
08EC 33        1806            rlc     a
08ED FC        1807            mov     r4,a
08EE 7001      1808            jnz     L009016?
08F0 758040    1809            mov     ___fail_PARM_2,#__str_17
08F3 758181    1810            mov     (___fail_PARM_2 + 1),#(__str_17 >> 8)
08F6 754080    1811            mov     ___fail_PARM_3,#__str_7
08F9 75417B    1812            mov     (___fail_PARM_3 + 1),#(__str_7 >> 8)
08FC 7500ED    1813            mov     ___fail_PARM_4,#0xED
08FF E4        1814            clr     a
0900 F501      1815            mov     (___fail_PARM_4 + 1),a
0902 907BC0    1816            mov     dptr,#__str_5
0905 C002      1817            push    ar2
0907 C003      1818            push    ar3
0909 120100    1819            lcall   ___fail
090C D003      1820            pop     ar3
090E D002      1821            pop     ar2
0910           1822   L009016?:
0910           1823   ;        C:\Source\call51\Source\regression\sdcc_bugs\bug1115321.c:238: ASSERT (ret == 24);
0910 0500      1824            inc     ___numTests
0912 E4        1825            clr     a
0913 B50080    1826            cjne    a,___numTests,L009060?
0916 0501      1827            inc     (___numTests + 1)
0918           1828   L009060?:
0918 BA18C0    1829            cjne    r2,#0x18,L009061?
091B BB00C0    1830            cjne    r3,#0x00,L009061?
091E 8001      1831            sjmp    L009018?
0920           1832   L009061?:
0920 758040    1833            mov     ___fail_PARM_2,#__str_18
0923 758182    1834            mov     (___fail_PARM_2 + 1),#(__str_18 >> 8)
0926 754080    1835            mov     ___fail_PARM_3,#__str_7
0929 75417B    1836            mov     (___fail_PARM_3 + 1),#(__str_7 >> 8)
092C 7500EE    1837            mov     ___fail_PARM_4,#0xEE
092F E4        1838            clr     a
0930 F501      1839            mov     (___fail_PARM_4 + 1),a
0932 907BC0    1840            mov     dptr,#__str_5
0935 120100    1841            lcall   ___fail
0938           1842   L009018?:
0938           1843   ;        C:\Source\call51\Source\regression\sdcc_bugs\bug1115321.c:239: ret = C51_SNPRINTF( buffer, 32, "% 3s, % 3s.", "Hello", "world" );
0938 7400      1844            mov     a,#__str_11
093A C0E0      1845            push    acc
093C 747D      1846            mov     a,#(__str_11 >> 8)
093E C0E0      1847            push    acc
0940 7480      1848            mov     a,#0x80
0942 C0E0      1849            push    acc
0944 7440      1850            mov     a,#__str_10
0946 C0E0      1851            push    acc
0948 747D      1852            mov     a,#(__str_10 >> 8)
094A C0E0      1853            push    acc
094C 7480      1854            mov     a,#0x80
094E C0E0      1855            push    acc
0950 7480      1856            mov     a,#__str_19
0952 C0E0      1857            push    acc
0954 7482      1858            mov     a,#(__str_19 >> 8)
0956 C0E0      1859            push    acc
0958 7480      1860            mov     a,#0x80
095A C0E0      1861            push    acc
095C 7420      1862            mov     a,#0x20
095E C0E0      1863            push    acc
0960 74C8      1864            mov     a,#_test_s_buffer_1_1
0962 C0E0      1865            push    acc
0964 7463      1866            mov     a,#(_test_s_buffer_1_1 >> 8)
0966 C0E0      1867            push    acc
0968 7440      1868            mov     a,#0x40
096A C0E0      1869            push    acc
096C 120100    1870            lcall   _snprintf
096F AC82      1871            mov     r4,dpl
0971 E581      1872            mov     a,sp
0973 24F3      1873            add     a,#0xf3
0975 F581      1874            mov     sp,a
0977 8C02      1875            mov     ar2,r4
0979 7B00      1876            mov     r3,#0x00
097B           1877   ;        C:\Source\call51\Source\regression\sdcc_bugs\bug1115321.c:241: ASSERT (strcmp(buffer, "Hel, wor.") == 0);
097B 0500      1878            inc     ___numTests
097D E4        1879            clr     a
097E B500C0    1880            cjne    a,___numTests,L009062?
0981 0501      1881            inc     (___numTests + 1)
0983           1882   L009062?:
0983 750000    1883            mov     _strcmp_PARM_2,#__str_20
0986 750183    1884            mov     (_strcmp_PARM_2 + 1),#(__str_20 >> 8)
0989 750280    1885            mov     (_strcmp_PARM_2 + 2),#0x80
098C 9063C8    1886            mov     dptr,#_test_s_buffer_1_1
098F 75F040    1887            mov     b,#0x40
0992 C002      1888            push    ar2
0994 C003      1889            push    ar3
0996 120100    1890            lcall   _strcmp
0999 AC82      1891            mov     r4,dpl
099B AD83      1892            mov     r5,dph
099D D003      1893            pop     ar3
099F D002      1894            pop     ar2
09A1 EC        1895            mov     a,r4
09A2 4D        1896            orl     a,r5
09A3 B40140    1897            cjne    a,#0x01,L009063?
09A6           1898   L009063?:
09A6 E4        1899            clr     a
09A7 33        1900            rlc     a
09A8 FC        1901            mov     r4,a
09A9 7001      1902            jnz     L009020?
09AB 7580C0    1903            mov     ___fail_PARM_2,#__str_21
09AE 758183    1904            mov     (___fail_PARM_2 + 1),#(__str_21 >> 8)
09B1 754080    1905            mov     ___fail_PARM_3,#__str_7
09B4 75417B    1906            mov     (___fail_PARM_3 + 1),#(__str_7 >> 8)
09B7 7500F1    1907            mov     ___fail_PARM_4,#0xF1
09BA E4        1908            clr     a
09BB F501      1909            mov     (___fail_PARM_4 + 1),a
09BD 907BC0    1910            mov     dptr,#__str_5
09C0 C002      1911            push    ar2
09C2 C003      1912            push    ar3
09C4 120100    1913            lcall   ___fail
09C7 D003      1914            pop     ar3
09C9 D002      1915            pop     ar2
09CB           1916   L009020?:
09CB           1917   ;        C:\Source\call51\Source\regression\sdcc_bugs\bug1115321.c:242: ASSERT (ret == 10);
09CB 0500      1918            inc     ___numTests
09CD E4        1919            clr     a
09CE B50000    1920            cjne    a,___numTests,L009065?
09D1 0501      1921            inc     (___numTests + 1)
09D3           1922   L009065?:
09D3 BA0A40    1923            cjne    r2,#0x0A,L009066?
09D6 BB0040    1924            cjne    r3,#0x00,L009066?
09D9 8001      1925            sjmp    L009022?
09DB           1926   L009066?:
09DB 7580C0    1927            mov     ___fail_PARM_2,#__str_22
09DE 758184    1928            mov     (___fail_PARM_2 + 1),#(__str_22 >> 8)
09E1 754080    1929            mov     ___fail_PARM_3,#__str_7
09E4 75417B    1930            mov     (___fail_PARM_3 + 1),#(__str_7 >> 8)
09E7 7500F2    1931            mov     ___fail_PARM_4,#0xF2
09EA E4        1932            clr     a
09EB F501      1933            mov     (___fail_PARM_4 + 1),a
09ED 907BC0    1934            mov     dptr,#__str_5
09F0 120100    1935            lcall   ___fail
09F3           1936   L009022?:
09F3           1937   ;        C:\Source\call51\Source\regression\sdcc_bugs\bug1115321.c:243: ret = C51_SNPRINTF( buffer, 32, "%03s, %03s.", "Hello", "world" );
09F3 7400      1938            mov     a,#__str_11
09F5 C0E0      1939            push    acc
09F7 747D      1940            mov     a,#(__str_11 >> 8)
09F9 C0E0      1941            push    acc
09FB 7480      1942            mov     a,#0x80
09FD C0E0      1943            push    acc
09FF 7440      1944            mov     a,#__str_10
0A01 C0E0      1945            push    acc
0A03 747D      1946            mov     a,#(__str_10 >> 8)
0A05 C0E0      1947            push    acc
0A07 7480      1948            mov     a,#0x80
0A09 C0E0      1949            push    acc
0A0B 7400      1950            mov     a,#__str_23
0A0D C0E0      1951            push    acc
0A0F 7485      1952            mov     a,#(__str_23 >> 8)
0A11 C0E0      1953            push    acc
0A13 7480      1954            mov     a,#0x80
0A15 C0E0      1955            push    acc
0A17 7420      1956            mov     a,#0x20
0A19 C0E0      1957            push    acc
0A1B 74C8      1958            mov     a,#_test_s_buffer_1_1
0A1D C0E0      1959            push    acc
0A1F 7463      1960            mov     a,#(_test_s_buffer_1_1 >> 8)
0A21 C0E0      1961            push    acc
0A23 7440      1962            mov     a,#0x40
0A25 C0E0      1963            push    acc
0A27 120100    1964            lcall   _snprintf
0A2A AC82      1965            mov     r4,dpl
0A2C E581      1966            mov     a,sp
0A2E 24F3      1967            add     a,#0xf3
0A30 F581      1968            mov     sp,a
0A32 8C02      1969            mov     ar2,r4
0A34 7B00      1970            mov     r3,#0x00
0A36           1971   ;        C:\Source\call51\Source\regression\sdcc_bugs\bug1115321.c:245: ASSERT (strcmp(buffer, "Hel, wor.") == 0);
0A36 0500      1972            inc     ___numTests
0A38 E4        1973            clr     a
0A39 B50040    1974            cjne    a,___numTests,L009067?
0A3C 0501      1975            inc     (___numTests + 1)
0A3E           1976   L009067?:
0A3E 750000    1977            mov     _strcmp_PARM_2,#__str_20
0A41 750183    1978            mov     (_strcmp_PARM_2 + 1),#(__str_20 >> 8)
0A44 750280    1979            mov     (_strcmp_PARM_2 + 2),#0x80
0A47 9063C8    1980            mov     dptr,#_test_s_buffer_1_1
0A4A 75F040    1981            mov     b,#0x40
0A4D C002      1982            push    ar2
0A4F C003      1983            push    ar3
0A51 120100    1984            lcall   _strcmp
0A54 AC82      1985            mov     r4,dpl
0A56 AD83      1986            mov     r5,dph
0A58 D003      1987            pop     ar3
0A5A D002      1988            pop     ar2
0A5C EC        1989            mov     a,r4
0A5D 4D        1990            orl     a,r5
0A5E B40180    1991            cjne    a,#0x01,L009068?
0A61           1992   L009068?:
0A61 E4        1993            clr     a
0A62 33        1994            rlc     a
0A63 FC        1995            mov     r4,a
0A64 7001      1996            jnz     L009024?
0A66 7580C0    1997            mov     ___fail_PARM_2,#__str_21
0A69 758183    1998            mov     (___fail_PARM_2 + 1),#(__str_21 >> 8)
0A6C 754080    1999            mov     ___fail_PARM_3,#__str_7
0A6F 75417B    2000            mov     (___fail_PARM_3 + 1),#(__str_7 >> 8)
0A72 7500F5    2001            mov     ___fail_PARM_4,#0xF5
0A75 E4        2002            clr     a
0A76 F501      2003            mov     (___fail_PARM_4 + 1),a
0A78 907BC0    2004            mov     dptr,#__str_5
0A7B C002      2005            push    ar2
0A7D C003      2006            push    ar3
0A7F 120100    2007            lcall   ___fail
0A82 D003      2008            pop     ar3
0A84 D002      2009            pop     ar2
0A86           2010   L009024?:
0A86           2011   ;        C:\Source\call51\Source\regression\sdcc_bugs\bug1115321.c:246: ASSERT (ret == 10);
0A86 0500      2012            inc     ___numTests
0A88 E4        2013            clr     a
0A89 B50000    2014            cjne    a,___numTests,L009070?
0A8C 0501      2015            inc     (___numTests + 1)
0A8E           2016   L009070?:
0A8E BA0A40    2017            cjne    r2,#0x0A,L009071?
0A91 BB0040    2018            cjne    r3,#0x00,L009071?
0A94 8001      2019            sjmp    L009026?
0A96           2020   L009071?:
0A96 7580C0    2021            mov     ___fail_PARM_2,#__str_22
0A99 758184    2022            mov     (___fail_PARM_2 + 1),#(__str_22 >> 8)
0A9C 754080    2023            mov     ___fail_PARM_3,#__str_7
0A9F 75417B    2024            mov     (___fail_PARM_3 + 1),#(__str_7 >> 8)
0AA2 7500F6    2025            mov     ___fail_PARM_4,#0xF6
0AA5 E4        2026            clr     a
0AA6 F501      2027            mov     (___fail_PARM_4 + 1),a
0AA8 907BC0    2028            mov     dptr,#__str_5
0AAB 120100    2029            lcall   ___fail
0AAE           2030   L009026?:
0AAE           2031   ;        C:\Source\call51\Source\regression\sdcc_bugs\bug1115321.c:247: ret = C51_SNPRINTF( buffer, 10, "%s", "Hello, world" );
0AAE 74C0      2032            mov     a,#__str_25
0AB0 C0E0      2033            push    acc
0AB2 7486      2034            mov     a,#(__str_25 >> 8)
0AB4 C0E0      2035            push    acc
0AB6 7480      2036            mov     a,#0x80
0AB8 C0E0      2037            push    acc
0ABA 7400      2038            mov     a,#__str_24
0ABC C0E0      2039            push    acc
0ABE 7487      2040            mov     a,#(__str_24 >> 8)
0AC0 C0E0      2041            push    acc
0AC2 7480      2042            mov     a,#0x80
0AC4 C0E0      2043            push    acc
0AC6 740A      2044            mov     a,#0x0A
0AC8 C0E0      2045            push    acc
0ACA 74C8      2046            mov     a,#_test_s_buffer_1_1
0ACC C0E0      2047            push    acc
0ACE 7463      2048            mov     a,#(_test_s_buffer_1_1 >> 8)
0AD0 C0E0      2049            push    acc
0AD2 7440      2050            mov     a,#0x40
0AD4 C0E0      2051            push    acc
0AD6 120100    2052            lcall   _snprintf
0AD9 AC82      2053            mov     r4,dpl
0ADB E581      2054            mov     a,sp
0ADD 24F6      2055            add     a,#0xf6
0ADF F581      2056            mov     sp,a
0AE1 8C02      2057            mov     ar2,r4
0AE3 7B00      2058            mov     r3,#0x00
0AE5           2059   ;        C:\Source\call51\Source\regression\sdcc_bugs\bug1115321.c:249: ASSERT (strcmp(buffer, "Hello, wo") == 0);
0AE5 0500      2060            inc     ___numTests
0AE7 E4        2061            clr     a
0AE8 B50040    2062            cjne    a,___numTests,L009072?
0AEB 0501      2063            inc     (___numTests + 1)
0AED           2064   L009072?:
0AED 750080    2065            mov     _strcmp_PARM_2,#__str_26
0AF0 750187    2066            mov     (_strcmp_PARM_2 + 1),#(__str_26 >> 8)
0AF3 750280    2067            mov     (_strcmp_PARM_2 + 2),#0x80
0AF6 9063C8    2068            mov     dptr,#_test_s_buffer_1_1
0AF9 75F040    2069            mov     b,#0x40
0AFC C002      2070            push    ar2
0AFE C003      2071            push    ar3
0B00 120100    2072            lcall   _strcmp
0B03 AC82      2073            mov     r4,dpl
0B05 AD83      2074            mov     r5,dph
0B07 D003      2075            pop     ar3
0B09 D002      2076            pop     ar2
0B0B EC        2077            mov     a,r4
0B0C 4D        2078            orl     a,r5
0B0D B401C0    2079            cjne    a,#0x01,L009073?
0B10           2080   L009073?:
0B10 E4        2081            clr     a
0B11 33        2082            rlc     a
0B12 FC        2083            mov     r4,a
0B13 7001      2084            jnz     L009028?
0B15 758040    2085            mov     ___fail_PARM_2,#__str_27
0B18 758188    2086            mov     (___fail_PARM_2 + 1),#(__str_27 >> 8)
0B1B 754080    2087            mov     ___fail_PARM_3,#__str_7
0B1E 75417B    2088            mov     (___fail_PARM_3 + 1),#(__str_7 >> 8)
0B21 7500F9    2089            mov     ___fail_PARM_4,#0xF9
0B24 E4        2090            clr     a
0B25 F501      2091            mov     (___fail_PARM_4 + 1),a
0B27 907BC0    2092            mov     dptr,#__str_5
0B2A C002      2093            push    ar2
0B2C C003      2094            push    ar3
0B2E 120100    2095            lcall   ___fail
0B31 D003      2096            pop     ar3
0B33 D002      2097            pop     ar2
0B35           2098   L009028?:
0B35           2099   ;        C:\Source\call51\Source\regression\sdcc_bugs\bug1115321.c:250: ASSERT (ret == 10);
0B35 0500      2100            inc     ___numTests
0B37 E4        2101            clr     a
0B38 B50080    2102            cjne    a,___numTests,L009075?
0B3B 0501      2103            inc     (___numTests + 1)
0B3D           2104   L009075?:
0B3D BA0AC0    2105            cjne    r2,#0x0A,L009076?
0B40 BB00C0    2106            cjne    r3,#0x00,L009076?
0B43 22        2107            ret
0B44           2108   L009076?:
0B44 7580C0    2109            mov     ___fail_PARM_2,#__str_22
0B47 758184    2110            mov     (___fail_PARM_2 + 1),#(__str_22 >> 8)
0B4A 754080    2111            mov     ___fail_PARM_3,#__str_7
0B4D 75417B    2112            mov     (___fail_PARM_3 + 1),#(__str_7 >> 8)
0B50 7500FA    2113            mov     ___fail_PARM_4,#0xFA
0B53 E4        2114            clr     a
0B54 F501      2115            mov     (___fail_PARM_4 + 1),a
0B56 907BC0    2116            mov     dptr,#__str_5
0B59 020100    2117            ljmp    ___fail
0B5C           2118   ;------------------------------------------------------------
0B5C           2119   ;Allocation info for local variables in function 'putchar'
0B5C           2120   ;------------------------------------------------------------
0B5C           2121   ;c                         Allocated to registers 
0B5C           2122   ;------------------------------------------------------------
0B5C           2123   ;        C:\Source\call51\Source\regression\sdcc_bugs\bug1115321.c:256: void putchar(char c)
0B5C           2124   ;        -----------------------------------------
0B5C           2125   ;         function putchar
0B5C           2126   ;        -----------------------------------------
0B5C           2127   _putchar:
0B5C           2128   ;        C:\Source\call51\Source\regression\sdcc_bugs\bug1115321.c:258: _putchar(c);
0B5C 020100    2129            ljmp    __putchar
0B5F           2130            rseg R_CSEG
0B5F           2131   
0000           2132            rseg R_CONST
0000           2133   __str_0:
0000 2D2D2D20  2134            db '--- FAIL: '
     4641494C
     3A20
000A 22        2135            db 0x22
000B 2573      2136            db '%s'
000D 22        2137            db 0x22
000E 206F6E20  2138            db ' on %s at %s:%u'
     25732061
     74202573
     3A2575
001D 0A        2139            db 0x0A
001E 00        2140            db 0x00
001F           2141   __str_1:
001F 2D2D2D20  2142            db '--- Running: %s'
     52756E6E
     696E673A
     202573
002E 0A        2143            db 0x0A
002F 00        2144            db 0x00
0030           2145   __str_2:
0030 2D2D2D20  2146            db '--- Summary: %u/%u/%u: %u failed of %u tests in %u cases.'
     53756D6D
     6172793A
     2025752F
     25752F25
     753A2025
     75206661
     696C6564
     206F6620
     25752074
     65737473
     20696E20
     25752063
     61736573
     2E
0069 0A        2147            db 0x0A
006A 00        2148            db 0x00
006B           2149   __str_3:
006B 2D3E7C25  2150            db '->|%%|<-'
     257C3C2D
0073 00        2151            db 0x00
0074           2152   __str_4:
0074 2D3E7C25  2153            db '->|%|<-'
     7C3C2D
007B 00        2154            db 0x00
007C           2155   __str_5:
007C 41737365  2156            db 'Assertion failed'
     7274696F
     6E206661
     696C6564
008C 00        2157            db 0x00
008D           2158   __str_6:
008D 73747263  2159            db 'strcmp(buffer, '
     6D702862
     75666665
     722C20
009C 22        2160            db 0x22
009D 2D3E7C25  2161            db '->|%|<-'
     7C3C2D
00A4 22        2162            db 0x22
00A5 29203D3D  2163            db ') == 0'
     2030
00AB 00        2164            db 0x00
00AC           2165   __str_7:
00AC 433A      2166            db 'C:'
00AE 5C        2167            db 0x5C
00AF 536F7572  2168            db 'Source'
     6365
00B5 5C        2169            db 0x5C
00B6 63616C6C  2170            db 'call51'
     3531
00BC 5C        2171            db 0x5C
00BD 536F7572  2172            db 'Source'
     6365
00C3 5C        2173            db 0x5C
00C4 72656772  2174            db 'regression'
     65737369
     6F6E
00CE 5C        2175            db 0x5C
00CF 73646363  2176            db 'sdcc_bugs'
     5F627567
     73
00D8 5C        2177            db 0x5C
00D9 62756731  2178            db 'bug1115321.c'
     31313533
     32312E63
00E5 00        2179            db 0x00
00E6           2180   __str_8:
00E6 72657420  2181            db 'ret == 8'
     3D3D2038
00EE 00        2182            db 0x00
00EF           2183   __str_9:
00EF 25732C20  2184            db '%s, %s.'
     25732E
00F6 00        2185            db 0x00
00F7           2186   __str_10:
00F7 48656C6C  2187            db 'Hello'
     6F
00FC 00        2188            db 0x00
00FD           2189   __str_11:
00FD 776F726C  2190            db 'world'
     64
0102 00        2191            db 0x00
0103           2192   __str_12:
0103 48656C6C  2193            db 'Hello, world.'
     6F2C2077
     6F726C64
     2E
0110 00        2194            db 0x00
0111           2195   __str_13:
0111 73747263  2196            db 'strcmp(buffer, '
     6D702862
     75666665
     722C20
0120 22        2197            db 0x22
0121 48656C6C  2198            db 'Hello, world.'
     6F2C2077
     6F726C64
     2E
012E 22        2199            db 0x22
012F 29203D3D  2200            db ') == 0'
     2030
0135 00        2201            db 0x00
0136           2202   __str_14:
0136 72657420  2203            db 'ret == 14'
     3D3D2031
     34
013F 00        2204            db 0x00
0140           2205   __str_15:
0140 25203130  2206            db '% 10s, % 10s.'
     732C2025
     20313073
     2E
014D 00        2207            db 0x00
014E           2208   __str_16:
014E 20202020  2209            db '     Hello,      world.'
     2048656C
     6C6F2C20
     20202020
     20776F72
     6C642E
0165 00        2210            db 0x00
0166           2211   __str_17:
0166 73747263  2212            db 'strcmp(buffer, '
     6D702862
     75666665
     722C20
0175 22        2213            db 0x22
0176 20202020  2214            db '     Hello,      world.'
     2048656C
     6C6F2C20
     20202020
     20776F72
     6C642E
018D 22        2215            db 0x22
018E 29203D3D  2216            db ') == 0'
     2030
0194 00        2217            db 0x00
0195           2218   __str_18:
0195 72657420  2219            db 'ret == 24'
     3D3D2032
     34
019E 00        2220            db 0x00
019F           2221   __str_19:
019F 25203373  2222            db '% 3s, % 3s.'
     2C202520
     33732E
01AA 00        2223            db 0x00
01AB           2224   __str_20:
01AB 48656C2C  2225            db 'Hel, wor.'
     20776F72
     2E
01B4 00        2226            db 0x00
01B5           2227   __str_21:
01B5 73747263  2228            db 'strcmp(buffer, '
     6D702862
     75666665
     722C20
01C4 22        2229            db 0x22
01C5 48656C2C  2230            db 'Hel, wor.'
     20776F72
     2E
01CE 22        2231            db 0x22
01CF 29203D3D  2232            db ') == 0'
     2030
01D5 00        2233            db 0x00
01D6           2234   __str_22:
01D6 72657420  2235            db 'ret == 10'
     3D3D2031
     30
01DF 00        2236            db 0x00
01E0           2237   __str_23:
01E0 25303373  2238            db '%03s, %03s.'
     2C202530
     33732E
01EB 00        2239            db 0x00
01EC           2240   __str_24:
01EC 2573      2241            db '%s'
01EE 00        2242            db 0x00
01EF           2243   __str_25:
01EF 48656C6C  2244            db 'Hello, world'
     6F2C2077
     6F726C64
01FB 00        2245            db 0x00
01FC           2246   __str_26:
01FC 48656C6C  2247            db 'Hello, wo'
     6F2C2077
     6F
0205 00        2248            db 0x00
0206           2249   __str_27:
0206 73747263  2250            db 'strcmp(buffer, '
     6D702862
     75666665
     722C20
0215 22        2251            db 0x22
0216 48656C6C  2252            db 'Hello, wo'
     6F2C2077
     6F
021F 22        2253            db 0x22
0220 29203D3D  2254            db ') == 0'
     2030
0226 00        2255            db 0x00
0227           2256   
0000           2257            rseg R_XINIT
0000           2258   
0003           2259            CSEG
0003           2260   
0003           2261   end
